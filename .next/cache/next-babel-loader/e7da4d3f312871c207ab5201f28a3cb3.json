{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect, useRef } from \"react\";\nimport { FilterContext } from \"../contexts/FilterContext\";\nimport { SearchContext } from \"../contexts/SearchContext\";\nimport { AnimeContext } from \"../contexts/AnimeContext\";\nimport Anime from \"./Anime\";\n\nconst Carousel = ({\n  topAnime\n}) => {\n  const {\n    0: anime,\n    1: setAnime\n  } = useState(topAnime);\n  const {\n    filter\n  } = useContext(FilterContext);\n  const {\n    query\n  } = useContext(SearchContext);\n  const {\n    selected,\n    dispatch\n  } = useContext(AnimeContext);\n  const {\n    0: scrollPercent,\n    1: setScrollPercent\n  } = useState(\"0%\");\n  const carouselSelector = useRef();\n  const {\n    0: isDown,\n    1: setIsDown\n  } = useState(false);\n  const {\n    0: startX,\n    1: setStartX\n  } = useState();\n  const {\n    0: scrollLeft,\n    1: setScrollLeft\n  } = useState();\n\n  let onMouseDown = e => {\n    setIsDown(true);\n    setStartX(e.pageX - carouselSelector.current.offsetLeft);\n    setScrollLeft(carouselSelector.current.scrollLeft);\n  };\n\n  let onMouseLeave = e => {\n    setIsDown(false);\n  };\n\n  let onMouseUp = e => {\n    setIsDown(false);\n  };\n\n  let onMouseMove = e => {\n    if (!isDown) return;\n    e.preventDefault();\n    const x = e.pageX;\n    const distance = (x - startX) * 2.5;\n    carouselSelector.current.scrollLeft = scrollLeft - distance;\n    let scrollPercentMath = carouselSelector.current.scrollLeft / (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth) * 100;\n\n    if (scrollPercentMath % 1 === 0) {\n      console.log(scrollPercentMath);\n      setScrollPercent(scrollPercentMath);\n    }\n  };\n\n  useEffect(() => {\n    const url = filter === \"top\" ? \"https://api.jikan.moe/v3/top/anime/1/bypopularity\" : \"https://api.jikan.moe/v3/top/anime/1/upcoming\";\n    fetch(url).then(response => response.json()).then(responseJson => setAnime(responseJson.top)).catch(err => console.log(err));\n  }, [filter]);\n  useEffect(() => {\n    if (query !== \"\") {\n      function formatQueryParams(params) {\n        const queryItems = _Object$keys(params).map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`);\n\n        return queryItems.join(\"&\");\n      }\n\n      const baseurl = \"https://api.jikan.moe/v3/search/anime\";\n      let params = {\n        q: query,\n        page: 1,\n        type: \"tv\",\n        limit: 10\n      };\n      let url = baseurl + \"?\" + formatQueryParams(params);\n      fetch(url).then(response => response.json()).then(responseJson => setAnime(responseJson.results)).catch(err => console.log(err));\n    }\n  }, [query]);\n  useEffect(() => {\n    dispatch({\n      type: \"SELECT_ANIME\",\n      selected: {}\n    });\n  }, [anime]);\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"333669359\", [scrollPercent + '%']]]) + \" \" + \"carouselWrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    ref: carouselSelector,\n    onMouseDown: e => onMouseDown(e),\n    onMouseLeave: e => onMouseLeave(e),\n    onMouseUp: e => onMouseUp(e),\n    onMouseMove: e => onMouseMove(e),\n    className: _JSXStyle.dynamic([[\"333669359\", [scrollPercent + '%']]]) + \" \" + `carousel ${isDown === true ? \"isDown\" : \"\"}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, anime.map((anime, index) => __jsx(Anime, {\n    key: index,\n    anime: anime,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"333669359\", [scrollPercent + '%']]]) + \" \" + \"scrollBar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), __jsx(_JSXStyle, {\n    id: \"333669359\",\n    dynamic: [scrollPercent + '%'],\n    __self: this\n  }, `.carouselWrapper.__jsx-style-dynamic-selector{width:100%;}.carousel.__jsx-style-dynamic-selector{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:175px;max-width:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch;padding-bottom:5px;}.carousel.__jsx-style-dynamic-selector{-ms-overflow-style:none;overflow:-moz-scrollbars-none;}.carousel.__jsx-style-dynamic-selector::-webkit-scrollbar{display:none;}.scrollBar.__jsx-style-dynamic-selector{width:${scrollPercent + '%'};height:6px;background-color:rgb(51,51,51);}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YWthaXRlY2gvVGFrYWktVGVjaC9hbmltZS10cmFpbGVycy1uZXh0L2NvbXBvbmVudHMvQ2Fyb3VzZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBc0drQixBQUdzQixBQUlJLEFBVVMsQUFLWCxBQUlzQixXQXRCckMsRUFtQkEsRUFmZSxTQVVpQixXQVNuQixXQUNzQixRQVRuQyx1QkFVQSxZQXBCbUIsaUJBQ0YsZUFDRyxrQkFDZSxpQ0FDZCxtQkFDckIiLCJmaWxlIjoiL1VzZXJzL3Rha2FpdGVjaC9UYWthaS1UZWNoL2FuaW1lLXRyYWlsZXJzLW5leHQvY29tcG9uZW50cy9DYXJvdXNlbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEZpbHRlckNvbnRleHQgfSBmcm9tIFwiLi4vY29udGV4dHMvRmlsdGVyQ29udGV4dFwiO1xuaW1wb3J0IHsgU2VhcmNoQ29udGV4dCB9IGZyb20gXCIuLi9jb250ZXh0cy9TZWFyY2hDb250ZXh0XCI7XG5pbXBvcnQgeyBBbmltZUNvbnRleHQgfSBmcm9tIFwiLi4vY29udGV4dHMvQW5pbWVDb250ZXh0XCI7XG5pbXBvcnQgQW5pbWUgZnJvbSBcIi4vQW5pbWVcIjtcblxuY29uc3QgQ2Fyb3VzZWwgPSAoeyB0b3BBbmltZSB9KSA9PiB7XG4gIGNvbnN0IFthbmltZSwgc2V0QW5pbWVdID0gdXNlU3RhdGUodG9wQW5pbWUpO1xuICBjb25zdCB7IGZpbHRlciB9ID0gdXNlQ29udGV4dChGaWx0ZXJDb250ZXh0KTtcbiAgY29uc3QgeyBxdWVyeSB9ID0gdXNlQ29udGV4dChTZWFyY2hDb250ZXh0KTtcbiAgY29uc3QgeyBzZWxlY3RlZCwgZGlzcGF0Y2ggfSA9IHVzZUNvbnRleHQoQW5pbWVDb250ZXh0KTtcblxuICBjb25zdCBbc2Nyb2xsUGVyY2VudCwgc2V0U2Nyb2xsUGVyY2VudF0gPSB1c2VTdGF0ZShcIjAlXCIpO1xuICBjb25zdCBjYXJvdXNlbFNlbGVjdG9yID0gdXNlUmVmKCk7XG5cbiAgY29uc3QgW2lzRG93biwgc2V0SXNEb3duXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N0YXJ0WCwgc2V0U3RhcnRYXSA9IHVzZVN0YXRlKCk7XG4gIGNvbnN0IFtzY3JvbGxMZWZ0LCBzZXRTY3JvbGxMZWZ0XSA9IHVzZVN0YXRlKCk7XG5cbiAgbGV0IG9uTW91c2VEb3duID0gZSA9PiB7XG4gICAgc2V0SXNEb3duKHRydWUpO1xuICAgIHNldFN0YXJ0WChlLnBhZ2VYIC0gY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50Lm9mZnNldExlZnQpO1xuICAgIHNldFNjcm9sbExlZnQoY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbExlZnQpO1xuICB9O1xuXG4gIGxldCBvbk1vdXNlTGVhdmUgPSBlID0+IHtcbiAgICBzZXRJc0Rvd24oZmFsc2UpO1xuICB9O1xuXG4gIGxldCBvbk1vdXNlVXAgPSBlID0+IHtcbiAgICBzZXRJc0Rvd24oZmFsc2UpO1xuICB9O1xuXG4gIGxldCBvbk1vdXNlTW92ZSA9IGUgPT4ge1xuICAgIGlmICghaXNEb3duKSByZXR1cm47XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHggPSBlLnBhZ2VYO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gKHggLSBzdGFydFgpICogMi41O1xuICAgIGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdCAtIGRpc3RhbmNlO1xuICAgIGxldCBzY3JvbGxQZXJjZW50TWF0aCA9ICAoY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbExlZnQgL1xuICAgICAgICAoY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbFdpZHRoIC0gY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50Lm9mZnNldFdpZHRoKSkgKiAxMDBcbiAgICBpZihzY3JvbGxQZXJjZW50TWF0aCAlIDEgPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coc2Nyb2xsUGVyY2VudE1hdGgpXG4gICAgICAgIHNldFNjcm9sbFBlcmNlbnQoc2Nyb2xsUGVyY2VudE1hdGgpO1xuICAgIH1cbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVybCA9XG4gICAgICBmaWx0ZXIgPT09IFwidG9wXCJcbiAgICAgICAgPyBcImh0dHBzOi8vYXBpLmppa2FuLm1vZS92My90b3AvYW5pbWUvMS9ieXBvcHVsYXJpdHlcIlxuICAgICAgICA6IFwiaHR0cHM6Ly9hcGkuamlrYW4ubW9lL3YzL3RvcC9hbmltZS8xL3VwY29taW5nXCI7XG4gICAgZmV0Y2godXJsKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4ocmVzcG9uc2VKc29uID0+IHNldEFuaW1lKHJlc3BvbnNlSnNvbi50b3ApKVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfSwgW2ZpbHRlcl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHF1ZXJ5ICE9PSBcIlwiKSB7XG4gICAgICBmdW5jdGlvbiBmb3JtYXRRdWVyeVBhcmFtcyhwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcXVlcnlJdGVtcyA9IE9iamVjdC5rZXlzKHBhcmFtcykubWFwKFxuICAgICAgICAgIGtleSA9PiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pfWBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5SXRlbXMuam9pbihcIiZcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJhc2V1cmwgPSBcImh0dHBzOi8vYXBpLmppa2FuLm1vZS92My9zZWFyY2gvYW5pbWVcIjtcbiAgICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICAgIHE6IHF1ZXJ5LFxuICAgICAgICBwYWdlOiAxLFxuICAgICAgICB0eXBlOiBcInR2XCIsXG4gICAgICAgIGxpbWl0OiAxMFxuICAgICAgfTtcblxuICAgICAgbGV0IHVybCA9IGJhc2V1cmwgKyBcIj9cIiArIGZvcm1hdFF1ZXJ5UGFyYW1zKHBhcmFtcyk7XG4gICAgICBmZXRjaCh1cmwpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2VKc29uID0+IHNldEFuaW1lKHJlc3BvbnNlSnNvbi5yZXN1bHRzKSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICB9XG4gIH0sIFtxdWVyeV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBcIlNFTEVDVF9BTklNRVwiLCBzZWxlY3RlZDoge30gfSk7XG4gIH0sIFthbmltZV0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjYXJvdXNlbFdyYXBwZXJcIj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXtgY2Fyb3VzZWwgJHtpc0Rvd24gPT09IHRydWUgPyBcImlzRG93blwiIDogXCJcIn1gfVxuICAgICAgICByZWY9e2Nhcm91c2VsU2VsZWN0b3J9XG4gICAgICAgIG9uTW91c2VEb3duPXtlID0+IG9uTW91c2VEb3duKGUpfVxuICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4gb25Nb3VzZUxlYXZlKGUpfVxuICAgICAgICBvbk1vdXNlVXA9e2UgPT4gb25Nb3VzZVVwKGUpfVxuICAgICAgICBvbk1vdXNlTW92ZT17ZSA9PiBvbk1vdXNlTW92ZShlKX1cbiAgICAgID5cbiAgICAgICAge2FuaW1lLm1hcCgoYW5pbWUsIGluZGV4KSA9PiAoXG4gICAgICAgICAgPEFuaW1lIGtleT17aW5kZXh9IGFuaW1lPXthbmltZX0gLz5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2Nyb2xsQmFyXCI+PC9kaXY+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5jYXJvdXNlbFdyYXBwZXIge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNhcm91c2VsIHtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAxNzVweDtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgb3ZlcmZsb3cteTogc2Nyb2xsOyAvKiBoYXMgdG8gYmUgc2Nyb2xsLCBub3QgYXV0byAqL1xuICAgICAgICAgIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmNhcm91c2VsIHtcbiAgICAgICAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7IC8vIElFIDEwK1xuICAgICAgICAgIG92ZXJmbG93OiAtbW96LXNjcm9sbGJhcnMtbm9uZTsgLy8gRmlyZWZveFxuICAgICAgICB9XG5cbiAgICAgICAgLmNhcm91c2VsOjotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTsgLy8gU2FmYXJpIGFuZCBDaHJvbWVcbiAgICAgICAgfVxuXG4gICAgICAgIC5zY3JvbGxCYXIge1xuICAgICAgICAgIHdpZHRoOiAke3Njcm9sbFBlcmNlbnQgKyAnJSd9O1xuICAgICAgICAgIGhlaWdodDogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYig1MSwgNTEsIDUxKTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2Fyb3VzZWw7XG4iXX0= */\n/*@ sourceURL=/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js */`));\n};\n\nexport default Carousel;","map":{"version":3,"sources":["/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js"],"names":["React","useState","useContext","useEffect","useRef","FilterContext","SearchContext","AnimeContext","Anime","Carousel","topAnime","anime","setAnime","filter","query","selected","dispatch","scrollPercent","setScrollPercent","carouselSelector","isDown","setIsDown","startX","setStartX","scrollLeft","setScrollLeft","onMouseDown","e","pageX","current","offsetLeft","onMouseLeave","onMouseUp","onMouseMove","preventDefault","x","distance","scrollPercentMath","scrollWidth","offsetWidth","console","log","url","fetch","then","response","json","responseJson","top","catch","err","formatQueryParams","params","queryItems","map","key","encodeURIComponent","join","baseurl","q","page","type","limit","results","index"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef } from \"react\";\nimport { FilterContext } from \"../contexts/FilterContext\";\nimport { SearchContext } from \"../contexts/SearchContext\";\nimport { AnimeContext } from \"../contexts/AnimeContext\";\nimport Anime from \"./Anime\";\n\nconst Carousel = ({ topAnime }) => {\n  const [anime, setAnime] = useState(topAnime);\n  const { filter } = useContext(FilterContext);\n  const { query } = useContext(SearchContext);\n  const { selected, dispatch } = useContext(AnimeContext);\n\n  const [scrollPercent, setScrollPercent] = useState(\"0%\");\n  const carouselSelector = useRef();\n\n  const [isDown, setIsDown] = useState(false);\n  const [startX, setStartX] = useState();\n  const [scrollLeft, setScrollLeft] = useState();\n\n  let onMouseDown = e => {\n    setIsDown(true);\n    setStartX(e.pageX - carouselSelector.current.offsetLeft);\n    setScrollLeft(carouselSelector.current.scrollLeft);\n  };\n\n  let onMouseLeave = e => {\n    setIsDown(false);\n  };\n\n  let onMouseUp = e => {\n    setIsDown(false);\n  };\n\n  let onMouseMove = e => {\n    if (!isDown) return;\n    e.preventDefault();\n    const x = e.pageX;\n    const distance = (x - startX) * 2.5;\n    carouselSelector.current.scrollLeft = scrollLeft - distance;\n    let scrollPercentMath =  (carouselSelector.current.scrollLeft /\n        (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth)) * 100\n    if(scrollPercentMath % 1 === 0) {\n        console.log(scrollPercentMath)\n        setScrollPercent(scrollPercentMath);\n    }\n  };\n\n  useEffect(() => {\n    const url =\n      filter === \"top\"\n        ? \"https://api.jikan.moe/v3/top/anime/1/bypopularity\"\n        : \"https://api.jikan.moe/v3/top/anime/1/upcoming\";\n    fetch(url)\n      .then(response => response.json())\n      .then(responseJson => setAnime(responseJson.top))\n      .catch(err => console.log(err));\n  }, [filter]);\n\n  useEffect(() => {\n    if (query !== \"\") {\n      function formatQueryParams(params) {\n        const queryItems = Object.keys(params).map(\n          key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n        );\n        return queryItems.join(\"&\");\n      }\n\n      const baseurl = \"https://api.jikan.moe/v3/search/anime\";\n      let params = {\n        q: query,\n        page: 1,\n        type: \"tv\",\n        limit: 10\n      };\n\n      let url = baseurl + \"?\" + formatQueryParams(params);\n      fetch(url)\n        .then(response => response.json())\n        .then(responseJson => setAnime(responseJson.results))\n        .catch(err => console.log(err));\n    }\n  }, [query]);\n\n  useEffect(() => {\n    dispatch({ type: \"SELECT_ANIME\", selected: {} });\n  }, [anime]);\n\n  return (\n    <div className=\"carouselWrapper\">\n      <div\n        className={`carousel ${isDown === true ? \"isDown\" : \"\"}`}\n        ref={carouselSelector}\n        onMouseDown={e => onMouseDown(e)}\n        onMouseLeave={e => onMouseLeave(e)}\n        onMouseUp={e => onMouseUp(e)}\n        onMouseMove={e => onMouseMove(e)}\n      >\n        {anime.map((anime, index) => (\n          <Anime key={index} anime={anime} />\n        ))}\n      </div>\n      <div className=\"scrollBar\"></div>\n      <style jsx>{`\n        .carouselWrapper {\n          width: 100%;\n        }\n\n        .carousel {\n          cursor: pointer;\n          display: flex;\n          min-height: 175px;\n          max-width: 100%;\n          overflow-y: scroll; /* has to be scroll, not auto */\n          -webkit-overflow-scrolling: touch;\n          padding-bottom: 5px;\n        }\n\n        .carousel {\n          -ms-overflow-style: none; // IE 10+\n          overflow: -moz-scrollbars-none; // Firefox\n        }\n\n        .carousel::-webkit-scrollbar {\n          display: none; // Safari and Chrome\n        }\n\n        .scrollBar {\n          width: ${scrollPercent + '%'};\n          height: 6px;\n          background-color: rgb(51, 51, 51);\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default Carousel;\n"]},"metadata":{},"sourceType":"module"}