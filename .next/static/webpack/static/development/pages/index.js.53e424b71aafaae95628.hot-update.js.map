{"version":3,"file":"static/webpack/static/development/pages/index.js.53e424b71aafaae95628.hot-update.js","sources":["webpack:///./components/VideosOverlay.js"],"sourcesContent":["import React, { useState, useEffect, useContext} from 'react'\nimport { AnimeContext } from '../contexts/AnimeContext'\nimport { OverlayContext } from '../contexts/OverlayContext'\nimport ModalVideo from 'react-modal-video'\n\n\nconst VideosOverlay = () => {\n    const { selected } = useContext(AnimeContext)\n    const { dispatch, hidden } = useContext(OverlayContext)\n    const [ trailers, setTrailers] = useState([])\n    const [ selectedTrailer, setSelectedTrailer] = useState()\n\n    \n        useEffect(() => {\n            if(selected.mal_id !== undefined) {\n            fetch(\"https://api.jikan.moe/v3/anime/\" + selected.mal_id + \"/videos\")\n            .then(response => response.json())\n            .then(responseJson => setTrailers(responseJson.promo))\n            .catch(err =>{\n                console.log(err)\n            })\n            }\n        },[selected])\n\n        console.log(selected)\n\n    const hideOverlay = () => {\n        dispatch({type:'HIDE_SHOW_OVERLAY', boolean:true})\n    }\n\n\n        var newval = '',\n        $this = $(this);\n    if (newval = $this.val().match(/(\\?|&)v=([^&#]+)/)) {\n        $this.val(newval.pop());\n    } else if (newval = $this.val().match(/(\\.be\\/)+([^\\/]+)/)) {\n        $this.val(newval.pop());\n    } else if (newval = $this.val().match(/(\\embed\\/)+([^\\/]+)/)) {\n        $this.val(newval.pop().replace('?rel=0',''));\n    }\n\n\n    console.log(trailers)\n    return(\n        <div onClick={() => hideOverlay()} className=\"overlay\">\n             <ModalVideo channel='youtube' isOpen={true} videoId='L61p2uyiMSo' onClose={() => this.setState({isOpen: false})} />\n\n            <div className=\"info\">\n                <h2 className='title'>{selected.title}</h2>\n                <h2 className='rating'>{selected.score + '/10'}</h2>\n            </div>\n            <div className='trailerCarousel'>\n                {trailers.map((trailer,index) => (\n                    <div className=\"trailer\" key={index}>\n                        <img src={trailer.image_url}></img>\n                        <h3>{trailer.title}</h3>\n                    </div>\n                ))}\n            </div>\n            <style jsx>{`\n                \n                .overlay {\n                    position: absolute;\n                    top: 0;\n                    bottom:0;\n                    left: 0;\n                    right: 0;\n                    z-index: 100;\n                    background-color: rgb(0,0,0);\n                    background-color: rgb(0,0,0,.9);\n                    margin-left: auto;\n                    margin-right:auto;\n                    display: ${hidden === true? \"none\" : \"flex\"};\n                    flex-direction: column;\n                }\n\n                .info {\n                    width: 80%;\n                    margin: 0 auto;\n                    flex: 0 0 30%;\n                }\n\n                .title {\n                    color: white;\n                    text-align: left;\n                }\n\n                .rating {\n                    color: white;\n\n                    text-align: left\n                }\n\n\n                .trailerCarousel {\n                    width: 100%;\n                    display: flex;\n                    flex-wrap: wrap;\n                    align-items: center;\n                }\n\n                .trailer {\n                    width: 80%;\n                    margin:0 auto 10px auto;\n                }\n                .trailer img {\n                    width: 100%;\n                }\n                .trailer h3 {\n                    color: white;\n                }\n            `}\n            </style>\n        </div>\n    )\n}\n\nexport default VideosOverlay"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AARA;AAAA;AAAA;AAAA;AAuEA;AACA;AACA;;;;A","sourceRoot":""}