{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from 'react';\nimport { FilterContext } from '../contexts/FilterContext';\nimport { SearchContext } from '../contexts/SearchContext';\nimport { AnimeContext } from '../contexts/AnimeContext';\nimport Anime from './Anime';\n\nconst Carousel = ({\n  topAnime\n}) => {\n  const {\n    0: anime,\n    1: setAnime\n  } = useState(topAnime);\n  const {\n    filter\n  } = useContext(FilterContext);\n  const {\n    query\n  } = useContext(SearchContext);\n  const {\n    selected,\n    dispatch\n  } = useContext(AnimeContext);\n  useEffect(() => {\n    const url = filter === 'top' ? 'https://api.jikan.moe/v3/top/anime/1/bypopularity' : 'https://api.jikan.moe/v3/top/anime/1/upcoming';\n    fetch(url).then(response => response.json()).then(responseJson => setAnime(responseJson.top)).catch(err => console.log(err));\n  }, [filter]);\n  useEffect(() => {\n    if (query !== '') {\n      function formatQueryParams(params) {\n        const queryItems = _Object$keys(params).map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`);\n\n        return queryItems.join('&');\n      }\n\n      const baseurl = 'https://api.jikan.moe/v3/search/anime';\n      let params = {\n        q: query,\n        page: 1,\n        type: 'tv',\n        limit: 10\n      };\n      let url = baseurl + '?' + formatQueryParams(params);\n      fetch(url).then(response => response.json()).then(responseJson => setAnime(responseJson.results)).catch(err => console.log(err));\n    }\n  }, [query]);\n  useEffect(() => {\n    dispatch({\n      type: 'SELECT_ANIME',\n      selected: {}\n    });\n  }, [anime]);\n  return __jsx(\"div\", {\n    className: \"jsx-4165504067\" + \" \" + \"carousel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, anime.map((anime, index) => __jsx(Anime, {\n    key: index,\n    anime: anime,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })), __jsx(_JSXStyle, {\n    id: \"4165504067\",\n    __self: this\n  }, \".carousel.jsx-4165504067{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:175px;width:100%;overflow:scroll;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YWthaXRlY2gvVGFrYWktVGVjaC9hbmltZS10cmFpbGVycy1uZXh0L2NvbXBvbmVudHMvQ2Fyb3VzZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNkR3QixBQUc4QiwwRUFDSSxpQkFDTixXQUNLLGdCQUNwQiIsImZpbGUiOiIvVXNlcnMvdGFrYWl0ZWNoL1Rha2FpLVRlY2gvYW5pbWUtdHJhaWxlcnMtbmV4dC9jb21wb25lbnRzL0Nhcm91c2VsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDb250ZXh0LCB1c2VFZmZlY3R9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRmlsdGVyQ29udGV4dCB9IGZyb20gJy4uL2NvbnRleHRzL0ZpbHRlckNvbnRleHQnXG5pbXBvcnQgeyBTZWFyY2hDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dHMvU2VhcmNoQ29udGV4dCdcbmltcG9ydCB7IEFuaW1lQ29udGV4dCB9IGZyb20gJy4uL2NvbnRleHRzL0FuaW1lQ29udGV4dCdcbmltcG9ydCBBbmltZSBmcm9tICcuL0FuaW1lJ1xuXG5cblxuY29uc3QgQ2Fyb3VzZWwgPSAoe3RvcEFuaW1lfSkgPT4ge1xuXG4gICAgY29uc3QgW2FuaW1lLCBzZXRBbmltZV0gPSB1c2VTdGF0ZSh0b3BBbmltZSlcbiAgICBjb25zdCB7ZmlsdGVyfSA9IHVzZUNvbnRleHQoRmlsdGVyQ29udGV4dClcbiAgICBjb25zdCB7cXVlcnl9ID0gdXNlQ29udGV4dChTZWFyY2hDb250ZXh0KVxuICAgIGNvbnN0IHtzZWxlY3RlZCwgZGlzcGF0Y2h9ID0gdXNlQ29udGV4dChBbmltZUNvbnRleHQpXG4gICAgXG5cblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGZpbHRlciA9PT0gJ3RvcCcgPyAnaHR0cHM6Ly9hcGkuamlrYW4ubW9lL3YzL3RvcC9hbmltZS8xL2J5cG9wdWxhcml0eScgOiAnaHR0cHM6Ly9hcGkuamlrYW4ubW9lL3YzL3RvcC9hbmltZS8xL3VwY29taW5nJ1xuICAgICAgICBmZXRjaCh1cmwpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2VKc29uID0+IHNldEFuaW1lKHJlc3BvbnNlSnNvbi50b3ApKVxuICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikgKVxuICAgIH0sW2ZpbHRlcl0pXG4gICAgXG5cbiAgICB1c2VFZmZlY3QoKCkgPT4geyBcbiAgICAgICAgaWYocXVlcnkgIT09ICcnKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXRRdWVyeVBhcmFtcyhwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBxdWVyeUl0ZW1zID0gT2JqZWN0LmtleXMocGFyYW1zKVxuICAgICAgICAgICAgICAgIC5tYXAoa2V5ID0+IGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSl9YClcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnlJdGVtcy5qb2luKCcmJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGJhc2V1cmwgPSAnaHR0cHM6Ly9hcGkuamlrYW4ubW9lL3YzL3NlYXJjaC9hbmltZSc7XG4gICAgICAgICAgICBsZXQgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHE6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgICAgICAgdHlwZTogJ3R2JyxcbiAgICAgICAgICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgdXJsID0gYmFzZXVybCArICc/JyArIGZvcm1hdFF1ZXJ5UGFyYW1zKHBhcmFtcyk7XG4gICAgICAgICAgICBmZXRjaCh1cmwpXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZUpzb24gPT4gc2V0QW5pbWUocmVzcG9uc2VKc29uLnJlc3VsdHMpKVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpIClcblxuICAgICAgICB9XG4gICAgfSxbcXVlcnldKVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2goe3R5cGU6J1NFTEVDVF9BTklNRScsIHNlbGVjdGVkOiB7fX0pXG4gICAgfSxbYW5pbWVdKVxuXG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcm91c2VsXCI+XG4gICAgICAgICAgICB7YW5pbWUubWFwKChhbmltZSxpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgIDxBbmltZSBrZXk9e2luZGV4fSBhbmltZT17YW5pbWV9IC8+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICAgIC5jYXJvdXNlbCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAxNzVweDtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogc2Nyb2xsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBgfTwvc3R5bGU+XG4gICAgICAgIDwvZGl2PlxuICAgIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2Fyb3VzZWxcbiJdfQ== */\\n/*@ sourceURL=/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js */\"));\n};\n\nexport default Carousel;","map":{"version":3,"sources":["/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js"],"names":["React","useState","useContext","useEffect","FilterContext","SearchContext","AnimeContext","Anime","Carousel","topAnime","anime","setAnime","filter","query","selected","dispatch","url","fetch","then","response","json","responseJson","top","catch","err","console","log","formatQueryParams","params","queryItems","map","key","encodeURIComponent","join","baseurl","q","page","type","limit","results","index"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect} from 'react'\nimport { FilterContext } from '../contexts/FilterContext'\nimport { SearchContext } from '../contexts/SearchContext'\nimport { AnimeContext } from '../contexts/AnimeContext'\nimport Anime from './Anime'\n\n\n\nconst Carousel = ({topAnime}) => {\n\n    const [anime, setAnime] = useState(topAnime)\n    const {filter} = useContext(FilterContext)\n    const {query} = useContext(SearchContext)\n    const {selected, dispatch} = useContext(AnimeContext)\n    \n\n\n    useEffect(() => {\n        const url = filter === 'top' ? 'https://api.jikan.moe/v3/top/anime/1/bypopularity' : 'https://api.jikan.moe/v3/top/anime/1/upcoming'\n        fetch(url)\n        .then(response => response.json())\n        .then(responseJson => setAnime(responseJson.top))\n        .catch(err => console.log(err) )\n    },[filter])\n    \n\n    useEffect(() => { \n        if(query !== '') {\n            function formatQueryParams(params) {\n                const queryItems = Object.keys(params)\n                .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)\n                return queryItems.join('&');\n            }\n            \n            const baseurl = 'https://api.jikan.moe/v3/search/anime';\n            let params = {\n                q: query,\n                page: 1,\n                type: 'tv',\n                limit: 10,\n            };\n            \n            let url = baseurl + '?' + formatQueryParams(params);\n            fetch(url)\n            .then(response => response.json())\n            .then(responseJson => setAnime(responseJson.results))\n            .catch(err => console.log(err) )\n\n        }\n    },[query])\n\n    useEffect(() => {\n        dispatch({type:'SELECT_ANIME', selected: {}})\n    },[anime])\n\n\n    return (\n        <div className=\"carousel\">\n            {anime.map((anime,index) => (\n                <Anime key={index} anime={anime} />\n            ))}\n            <style jsx>{`\n            .carousel {\n                display: flex;\n                min-height: 175px;\n                width: 100%;\n                overflow: scroll;\n            }\n\n            `}</style>\n        </div>\n    )\n}\n\nexport default Carousel\n"]},"metadata":{},"sourceType":"module"}