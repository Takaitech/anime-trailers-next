{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect, useRef } from \"react\";\nimport { FilterContext } from \"../contexts/FilterContext\";\nimport { SearchContext } from \"../contexts/SearchContext\";\nimport { AnimeContext } from \"../contexts/AnimeContext\";\nimport Anime from \"./Anime\";\n\nvar Carousel = function Carousel(_ref) {\n  var topAnime = _ref.topAnime;\n\n  var _useState = useState(topAnime),\n      anime = _useState[0],\n      setAnime = _useState[1];\n\n  var _useContext = useContext(FilterContext),\n      filter = _useContext.filter;\n\n  var _useContext2 = useContext(SearchContext),\n      query = _useContext2.query;\n\n  var _useContext3 = useContext(AnimeContext),\n      selected = _useContext3.selected,\n      dispatch = _useContext3.dispatch;\n\n  var carouselSelector = useRef();\n\n  var _useState2 = useState(\"0%\"),\n      scrollProgress = _useState2[0],\n      setScrollProgress = _useState2[1];\n\n  var getScrollPercent = function getScrollPercent() {\n    carouselSelector.current.scrollLeft / (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth) * 100;\n  };\n\n  var _useState3 = useState(false),\n      isDown = _useState3[0],\n      setIsDown = _useState3[1];\n\n  var _useState4 = useState(),\n      startX = _useState4[0],\n      setStartX = _useState4[1];\n\n  var _useState5 = useState(),\n      scrollLeft = _useState5[0],\n      setScrollLeft = _useState5[1];\n\n  var _onMouseDown = function onMouseDown(e) {\n    setIsDown(true);\n    setStartX(e.pageX - carouselSelector.current.offsetLeft);\n    setScrollLeft(carouselSelector.current.scrollLeft);\n    var scrollPercentSum = getScrollPercent();\n    setScrollProgress(scrollPercent);\n  };\n\n  var _onMouseLeave = function onMouseLeave(e) {\n    setIsDown(false);\n  };\n\n  var _onMouseUp = function onMouseUp(e) {\n    setIsDown(false);\n    setScrollProgress(scrollPercentMath);\n  };\n\n  var _onMouseMove = function onMouseMove(e) {\n    if (!isDown) return;\n    e.preventDefault();\n    var x = e.pageX;\n    var distance = (x - startX) * 3;\n    carouselSelector.current.scrollLeft = scrollLeft - distance;\n  };\n\n  var _onTouchStart = function onTouchStart(e) {\n    setScrollProgress(scrollPercentMath);\n  };\n\n  var _onTouchEnd = function onTouchEnd(e) {\n    setScrollProgress(scrollPercentMath);\n  };\n\n  useEffect(function () {\n    var url = filter === \"top\" ? \"https://api.jikan.moe/v3/top/anime/1/bypopularity\" : \"https://api.jikan.moe/v3/top/anime/1/upcoming\";\n    fetch(url).then(function (response) {\n      return response.json();\n    }).then(function (responseJson) {\n      return setAnime(responseJson.top);\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  }, [filter]);\n  useEffect(function () {\n    if (query !== \"\") {\n      var formatQueryParams = function formatQueryParams(params) {\n        var queryItems = _Object$keys(params).map(function (key) {\n          return \"\".concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(params[key]));\n        });\n\n        return queryItems.join(\"&\");\n      };\n\n      var baseurl = \"https://api.jikan.moe/v3/search/anime\";\n      var params = {\n        q: query,\n        page: 1,\n        type: \"tv\",\n        limit: 10\n      };\n      var url = baseurl + \"?\" + formatQueryParams(params);\n      fetch(url).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        return setAnime(responseJson.results);\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    }\n  }, [query]);\n  useEffect(function () {\n    dispatch({\n      type: \"SELECT_ANIME\",\n      selected: {}\n    });\n  }, [anime]);\n  return __jsx(\"div\", {\n    className: \"jsx-889152220\" + \" \" + \"carouselWrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    ref: carouselSelector,\n    onMouseDown: function onMouseDown(e) {\n      return _onMouseDown(e);\n    },\n    onMouseLeave: function onMouseLeave(e) {\n      return _onMouseLeave(e);\n    },\n    onMouseUp: function onMouseUp(e) {\n      return _onMouseUp(e);\n    },\n    onMouseMove: function onMouseMove(e) {\n      return _onMouseMove(e);\n    },\n    onTouchStart: function onTouchStart(e) {\n      return _onTouchStart(e);\n    },\n    onTouchEnd: function onTouchEnd(e) {\n      return _onTouchEnd(e);\n    },\n    className: \"jsx-889152220\" + \" \" + \"carousel \".concat(isDown === true ? \"isDown\" : \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, anime.map(function (anime, index) {\n    return __jsx(Anime, {\n      key: index,\n      anime: anime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    });\n  })), __jsx(\"div\", {\n    className: \"jsx-889152220\" + \" \" + \"scrollBar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }), __jsx(_JSXStyle, {\n    id: \"889152220\",\n    __self: this\n  }, \".carouselWrapper.jsx-889152220{width:100%;}.carousel.jsx-889152220{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:175px;max-width:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch;padding-bottom:5px;}.carousel.jsx-889152220{-ms-overflow-style:none;overflow:-moz-scrollbars-none;}.carousel.jsx-889152220::-webkit-scrollbar{display:none;}.scrollBar.jsx-889152220{width:\".concat(scrollPercent + '%', \";height:2px;background-color:rgb(71,71,51);-webkit-transition:0.5s width;transition:0.5s width;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YWthaXRlY2gvVGFrYWktVGVjaC9hbmltZS10cmFpbGVycy1uZXh0L2NvbXBvbmVudHMvQ2Fyb3VzZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBb0hrQixBQUdzQixBQUlJLEFBVVMsQUFLWCxBQUlzQixXQXRCckMsRUFtQkEsRUFmZSxTQVVpQixXQVNuQixXQUNzQixRQVRuQyx1QkFVd0IsWUFwQkwsaUJBQ0YsZUFDRyxRQW1CcEIsVUFsQm1DLGlDQUNkLG1CQUNyQiIsImZpbGUiOiIvVXNlcnMvdGFrYWl0ZWNoL1Rha2FpLVRlY2gvYW5pbWUtdHJhaWxlcnMtbmV4dC9jb21wb25lbnRzL0Nhcm91c2VsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRmlsdGVyQ29udGV4dCB9IGZyb20gXCIuLi9jb250ZXh0cy9GaWx0ZXJDb250ZXh0XCI7XG5pbXBvcnQgeyBTZWFyY2hDb250ZXh0IH0gZnJvbSBcIi4uL2NvbnRleHRzL1NlYXJjaENvbnRleHRcIjtcbmltcG9ydCB7IEFuaW1lQ29udGV4dCB9IGZyb20gXCIuLi9jb250ZXh0cy9BbmltZUNvbnRleHRcIjtcbmltcG9ydCBBbmltZSBmcm9tIFwiLi9BbmltZVwiO1xuXG5jb25zdCBDYXJvdXNlbCA9ICh7IHRvcEFuaW1lIH0pID0+IHtcbiAgY29uc3QgW2FuaW1lLCBzZXRBbmltZV0gPSB1c2VTdGF0ZSh0b3BBbmltZSk7XG4gIGNvbnN0IHsgZmlsdGVyIH0gPSB1c2VDb250ZXh0KEZpbHRlckNvbnRleHQpO1xuICBjb25zdCB7IHF1ZXJ5IH0gPSB1c2VDb250ZXh0KFNlYXJjaENvbnRleHQpO1xuICBjb25zdCB7IHNlbGVjdGVkLCBkaXNwYXRjaCB9ID0gdXNlQ29udGV4dChBbmltZUNvbnRleHQpO1xuXG4gIGNvbnN0IGNhcm91c2VsU2VsZWN0b3IgPSB1c2VSZWYoKTtcbiAgY29uc3QgW3Njcm9sbFByb2dyZXNzLCBzZXRTY3JvbGxQcm9ncmVzc10gPSB1c2VTdGF0ZShcIjAlXCIpO1xuICAgIGxldCBnZXRTY3JvbGxQZXJjZW50ID0gKCkgPT4ge1xuICAgICAgICAoY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbExlZnQgL1xuICAgICAgICAgICAgKGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5zY3JvbGxXaWR0aCAtIGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5vZmZzZXRXaWR0aCkpICogMTAwXG4gICAgfVxuXG4gIGNvbnN0IFtpc0Rvd24sIHNldElzRG93bl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzdGFydFgsIHNldFN0YXJ0WF0gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBbc2Nyb2xsTGVmdCwgc2V0U2Nyb2xsTGVmdF0gPSB1c2VTdGF0ZSgpO1xuXG4gIGxldCBvbk1vdXNlRG93biA9IGUgPT4ge1xuICAgIHNldElzRG93bih0cnVlKTtcbiAgICBzZXRTdGFydFgoZS5wYWdlWCAtIGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5vZmZzZXRMZWZ0KTtcbiAgICBzZXRTY3JvbGxMZWZ0KGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5zY3JvbGxMZWZ0KTtcbiAgICBsZXQgc2Nyb2xsUGVyY2VudFN1bSA9IGdldFNjcm9sbFBlcmNlbnQoKVxuICAgIHNldFNjcm9sbFByb2dyZXNzKHNjcm9sbFBlcmNlbnQpO1xuICB9O1xuXG4gIGxldCBvbk1vdXNlTGVhdmUgPSBlID0+IHtcbiAgICBzZXRJc0Rvd24oZmFsc2UpO1xuICB9O1xuXG4gIGxldCBvbk1vdXNlVXAgPSBlID0+IHtcbiAgICBzZXRJc0Rvd24oZmFsc2UpO1xuICAgICAgICBzZXRTY3JvbGxQcm9ncmVzcyhzY3JvbGxQZXJjZW50TWF0aCk7XG4gIH07XG5cbiAgbGV0IG9uTW91c2VNb3ZlID0gZSA9PiB7XG4gICAgaWYgKCFpc0Rvd24pIHJldHVybjtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgeCA9IGUucGFnZVg7XG4gICAgY29uc3QgZGlzdGFuY2UgPSAoeCAtIHN0YXJ0WCkgKiAzO1xuICAgIGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdCAtIGRpc3RhbmNlO1xuICAgXG4gICAgXG4gIH07XG5cbiAgbGV0IG9uVG91Y2hTdGFydCA9IGUgPT4ge1xuICAgICAgICBzZXRTY3JvbGxQcm9ncmVzcyhzY3JvbGxQZXJjZW50TWF0aCk7XG4gIH1cblxuICBsZXQgb25Ub3VjaEVuZCA9IGUgPT4ge1xuICAgICAgICBzZXRTY3JvbGxQcm9ncmVzcyhzY3JvbGxQZXJjZW50TWF0aCk7XG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVybCA9XG4gICAgICBmaWx0ZXIgPT09IFwidG9wXCJcbiAgICAgICAgPyBcImh0dHBzOi8vYXBpLmppa2FuLm1vZS92My90b3AvYW5pbWUvMS9ieXBvcHVsYXJpdHlcIlxuICAgICAgICA6IFwiaHR0cHM6Ly9hcGkuamlrYW4ubW9lL3YzL3RvcC9hbmltZS8xL3VwY29taW5nXCI7XG4gICAgZmV0Y2godXJsKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4ocmVzcG9uc2VKc29uID0+IHNldEFuaW1lKHJlc3BvbnNlSnNvbi50b3ApKVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfSwgW2ZpbHRlcl0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHF1ZXJ5ICE9PSBcIlwiKSB7XG4gICAgICBmdW5jdGlvbiBmb3JtYXRRdWVyeVBhcmFtcyhwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcXVlcnlJdGVtcyA9IE9iamVjdC5rZXlzKHBhcmFtcykubWFwKFxuICAgICAgICAgIGtleSA9PiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pfWBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5SXRlbXMuam9pbihcIiZcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJhc2V1cmwgPSBcImh0dHBzOi8vYXBpLmppa2FuLm1vZS92My9zZWFyY2gvYW5pbWVcIjtcbiAgICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICAgIHE6IHF1ZXJ5LFxuICAgICAgICBwYWdlOiAxLFxuICAgICAgICB0eXBlOiBcInR2XCIsXG4gICAgICAgIGxpbWl0OiAxMFxuICAgICAgfTtcblxuICAgICAgbGV0IHVybCA9IGJhc2V1cmwgKyBcIj9cIiArIGZvcm1hdFF1ZXJ5UGFyYW1zKHBhcmFtcyk7XG4gICAgICBmZXRjaCh1cmwpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2VKc29uID0+IHNldEFuaW1lKHJlc3BvbnNlSnNvbi5yZXN1bHRzKSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICB9XG4gIH0sIFtxdWVyeV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBcIlNFTEVDVF9BTklNRVwiLCBzZWxlY3RlZDoge30gfSk7XG4gIH0sIFthbmltZV0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjYXJvdXNlbFdyYXBwZXJcIj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXtgY2Fyb3VzZWwgJHtpc0Rvd24gPT09IHRydWUgPyBcImlzRG93blwiIDogXCJcIn1gfVxuICAgICAgICByZWY9e2Nhcm91c2VsU2VsZWN0b3J9XG4gICAgICAgIG9uTW91c2VEb3duPXtlID0+IG9uTW91c2VEb3duKGUpfVxuICAgICAgICBvbk1vdXNlTGVhdmU9e2UgPT4gb25Nb3VzZUxlYXZlKGUpfVxuICAgICAgICBvbk1vdXNlVXA9e2UgPT4gb25Nb3VzZVVwKGUpfVxuICAgICAgICBvbk1vdXNlTW92ZT17ZSA9PiBvbk1vdXNlTW92ZShlKX1cbiAgICAgICAgb25Ub3VjaFN0YXJ0PXtlID0+IG9uVG91Y2hTdGFydChlKX1cbiAgICAgICAgb25Ub3VjaEVuZD17ZSA9PiBvblRvdWNoRW5kKGUpfVxuXG4gICAgICA+XG4gICAgICAgIHthbmltZS5tYXAoKGFuaW1lLCBpbmRleCkgPT4gKFxuICAgICAgICAgIDxBbmltZSBrZXk9e2luZGV4fSBhbmltZT17YW5pbWV9IC8+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNjcm9sbEJhclwiPjwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAuY2Fyb3VzZWxXcmFwcGVyIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJvdXNlbCB7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgbWluLWhlaWdodDogMTc1cHg7XG4gICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgIG92ZXJmbG93LXk6IHNjcm9sbDsgLyogaGFzIHRvIGJlIHNjcm9sbCwgbm90IGF1dG8gKi9cbiAgICAgICAgICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJvdXNlbCB7XG4gICAgICAgICAgLW1zLW92ZXJmbG93LXN0eWxlOiBub25lOyAvLyBJRSAxMCtcbiAgICAgICAgICBvdmVyZmxvdzogLW1vei1zY3JvbGxiYXJzLW5vbmU7IC8vIEZpcmVmb3hcbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJvdXNlbDo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7IC8vIFNhZmFyaSBhbmQgQ2hyb21lXG4gICAgICAgIH1cblxuICAgICAgICAuc2Nyb2xsQmFyIHtcbiAgICAgICAgICB3aWR0aDogJHtzY3JvbGxQZXJjZW50ICsgJyUnfTtcbiAgICAgICAgICBoZWlnaHQ6IDJweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNzEsIDcxLCA1MSk7XG4gICAgICAgICAgdHJhbnNpdGlvbjogMC41cyB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2Fyb3VzZWw7XG4iXX0= */\\n/*@ sourceURL=/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js */\")));\n};\n\nexport default Carousel;","map":{"version":3,"sources":["/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js"],"names":["React","useState","useContext","useEffect","useRef","FilterContext","SearchContext","AnimeContext","Anime","Carousel","topAnime","anime","setAnime","filter","query","selected","dispatch","carouselSelector","scrollProgress","setScrollProgress","getScrollPercent","current","scrollLeft","scrollWidth","offsetWidth","isDown","setIsDown","startX","setStartX","setScrollLeft","onMouseDown","e","pageX","offsetLeft","scrollPercentSum","scrollPercent","onMouseLeave","onMouseUp","scrollPercentMath","onMouseMove","preventDefault","x","distance","onTouchStart","onTouchEnd","url","fetch","then","response","json","responseJson","top","err","console","log","formatQueryParams","params","queryItems","map","key","encodeURIComponent","join","baseurl","q","page","type","limit","results","index"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef } from \"react\";\nimport { FilterContext } from \"../contexts/FilterContext\";\nimport { SearchContext } from \"../contexts/SearchContext\";\nimport { AnimeContext } from \"../contexts/AnimeContext\";\nimport Anime from \"./Anime\";\n\nconst Carousel = ({ topAnime }) => {\n  const [anime, setAnime] = useState(topAnime);\n  const { filter } = useContext(FilterContext);\n  const { query } = useContext(SearchContext);\n  const { selected, dispatch } = useContext(AnimeContext);\n\n  const carouselSelector = useRef();\n  const [scrollProgress, setScrollProgress] = useState(\"0%\");\n    let getScrollPercent = () => {\n        (carouselSelector.current.scrollLeft /\n            (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth)) * 100\n    }\n\n  const [isDown, setIsDown] = useState(false);\n  const [startX, setStartX] = useState();\n  const [scrollLeft, setScrollLeft] = useState();\n\n  let onMouseDown = e => {\n    setIsDown(true);\n    setStartX(e.pageX - carouselSelector.current.offsetLeft);\n    setScrollLeft(carouselSelector.current.scrollLeft);\n    let scrollPercentSum = getScrollPercent()\n    setScrollProgress(scrollPercent);\n  };\n\n  let onMouseLeave = e => {\n    setIsDown(false);\n  };\n\n  let onMouseUp = e => {\n    setIsDown(false);\n        setScrollProgress(scrollPercentMath);\n  };\n\n  let onMouseMove = e => {\n    if (!isDown) return;\n    e.preventDefault();\n    const x = e.pageX;\n    const distance = (x - startX) * 3;\n    carouselSelector.current.scrollLeft = scrollLeft - distance;\n   \n    \n  };\n\n  let onTouchStart = e => {\n        setScrollProgress(scrollPercentMath);\n  }\n\n  let onTouchEnd = e => {\n        setScrollProgress(scrollPercentMath);\n  }\n\n  useEffect(() => {\n    const url =\n      filter === \"top\"\n        ? \"https://api.jikan.moe/v3/top/anime/1/bypopularity\"\n        : \"https://api.jikan.moe/v3/top/anime/1/upcoming\";\n    fetch(url)\n      .then(response => response.json())\n      .then(responseJson => setAnime(responseJson.top))\n      .catch(err => console.log(err));\n  }, [filter]);\n\n  useEffect(() => {\n    if (query !== \"\") {\n      function formatQueryParams(params) {\n        const queryItems = Object.keys(params).map(\n          key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n        );\n        return queryItems.join(\"&\");\n      }\n\n      const baseurl = \"https://api.jikan.moe/v3/search/anime\";\n      let params = {\n        q: query,\n        page: 1,\n        type: \"tv\",\n        limit: 10\n      };\n\n      let url = baseurl + \"?\" + formatQueryParams(params);\n      fetch(url)\n        .then(response => response.json())\n        .then(responseJson => setAnime(responseJson.results))\n        .catch(err => console.log(err));\n    }\n  }, [query]);\n\n  useEffect(() => {\n    dispatch({ type: \"SELECT_ANIME\", selected: {} });\n  }, [anime]);\n\n  return (\n    <div className=\"carouselWrapper\">\n      <div\n        className={`carousel ${isDown === true ? \"isDown\" : \"\"}`}\n        ref={carouselSelector}\n        onMouseDown={e => onMouseDown(e)}\n        onMouseLeave={e => onMouseLeave(e)}\n        onMouseUp={e => onMouseUp(e)}\n        onMouseMove={e => onMouseMove(e)}\n        onTouchStart={e => onTouchStart(e)}\n        onTouchEnd={e => onTouchEnd(e)}\n\n      >\n        {anime.map((anime, index) => (\n          <Anime key={index} anime={anime} />\n        ))}\n      </div>\n      <div className=\"scrollBar\"></div>\n      <style jsx>{`\n        .carouselWrapper {\n          width: 100%;\n        }\n\n        .carousel {\n          cursor: pointer;\n          display: flex;\n          min-height: 175px;\n          max-width: 100%;\n          overflow-y: scroll; /* has to be scroll, not auto */\n          -webkit-overflow-scrolling: touch;\n          padding-bottom: 5px;\n        }\n\n        .carousel {\n          -ms-overflow-style: none; // IE 10+\n          overflow: -moz-scrollbars-none; // Firefox\n        }\n\n        .carousel::-webkit-scrollbar {\n          display: none; // Safari and Chrome\n        }\n\n        .scrollBar {\n          width: ${scrollPercent + '%'};\n          height: 2px;\n          background-color: rgb(71, 71, 51);\n          transition: 0.5s width;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default Carousel;\n"]},"metadata":{},"sourceType":"module"}