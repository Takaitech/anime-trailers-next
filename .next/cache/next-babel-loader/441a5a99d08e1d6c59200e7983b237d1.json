{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport { FilterContext } from '../contexts/FilterContext';\nimport { SearchContext } from '../contexts/SearchContext';\nimport { AnimeContext } from '../contexts/AnimeContext';\nimport Anime from './Anime';\n\nvar Carousel = function Carousel(_ref) {\n  var topAnime = _ref.topAnime;\n\n  var _useState = useState(topAnime),\n      anime = _useState[0],\n      setAnime = _useState[1];\n\n  var _useContext = useContext(FilterContext),\n      filter = _useContext.filter;\n\n  var _useContext2 = useContext(SearchContext),\n      query = _useContext2.query;\n\n  var _useContext3 = useContext(AnimeContext),\n      selected = _useContext3.selected,\n      dispatch = _useContext3.dispatch;\n\n  var _useState2 = useState('0%'),\n      scrollPercent = _useState2[0],\n      setScrollPercent = _useState2[1];\n\n  var carouselSelector = useRef();\n\n  var _useState3 = useState(false),\n      isDown = _useState3[0],\n      setIsDown = _useState3[1];\n\n  var _useState4 = useState(),\n      startX = _useState4[0],\n      setStartX = _useState4[1];\n\n  var _useState5 = useState(),\n      scrollLeft = _useState5[0],\n      setScrollLeft = _useState5[1];\n\n  var _onMouseDown = function onMouseDown(e) {\n    setIsDown(true);\n    setStartX(e.pageX - carouselSelector.current.offsetLeft);\n    setScrollLeft(carouselSelector.current.scrollLeft);\n  };\n\n  var _onMouseLeave = function onMouseLeave(e) {\n    setIsDown(false);\n  };\n\n  var _onMouseUp = function onMouseUp(e) {\n    setIsDown(false);\n  };\n\n  var _onMouseMove = function onMouseMove(e) {\n    if (!isDown) return;\n    e.preventDefault();\n    var x = e.pageX;\n    var distance = (x - startX) * 2.5;\n    carouselSelector.current.scrollLeft = scrollLeft - distance;\n    setScrollPercent(carouselSelector.current.scrollLeft / (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth) * 100);\n  };\n\n  useEffect(function () {\n    var url = filter === 'top' ? 'https://api.jikan.moe/v3/top/anime/1/bypopularity' : 'https://api.jikan.moe/v3/top/anime/1/upcoming';\n    fetch(url).then(function (response) {\n      return response.json();\n    }).then(function (responseJson) {\n      return setAnime(responseJson.top);\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  }, [filter]);\n  useEffect(function () {\n    if (query !== '') {\n      var formatQueryParams = function formatQueryParams(params) {\n        var queryItems = _Object$keys(params).map(function (key) {\n          return \"\".concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(params[key]));\n        });\n\n        return queryItems.join('&');\n      };\n\n      var baseurl = 'https://api.jikan.moe/v3/search/anime';\n      var params = {\n        q: query,\n        page: 1,\n        type: 'tv',\n        limit: 10\n      };\n      var url = baseurl + '?' + formatQueryParams(params);\n      fetch(url).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        return setAnime(responseJson.results);\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    }\n  }, [query]);\n  useEffect(function () {\n    dispatch({\n      type: 'SELECT_ANIME',\n      selected: {}\n    });\n  }, [anime]);\n  return __jsx(\"div\", {\n    className: \"carouselWrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    ref: carouselSelector,\n    onMouseDown: function onMouseDown(e) {\n      return _onMouseDown(e);\n    },\n    onMouseLeave: function onMouseLeave(e) {\n      return _onMouseLeave(e);\n    },\n    onMouseUp: function onMouseUp(e) {\n      return _onMouseUp(e);\n    },\n    onMouseMove: function onMouseMove(e) {\n      return _onMouseMove(e);\n    },\n    className: \"jsx-1763632196\" + \" \" + \"carousel \".concat(isDown === true ? 'isDown' : \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, anime.map(function (anime, index) {\n    return __jsx(Anime, {\n      key: index,\n      anime: anime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    });\n  }), __jsx(_JSXStyle, {\n    id: \"1763632196\",\n    __self: this\n  }, \".carouselWrapper.jsx-1763632196{width:100%;}.carousel.jsx-1763632196{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:175px;max-width:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch;padding-bottom:5px;}.carousel.jsx-1763632196{-ms-overflow-style:none;overflow:-moz-scrollbars-none;}.carousel.jsx-1763632196::-webkit-scrollbar{display:none;}.scrollBar.jsx-1763632196{width:100%;height:6px;background-color:rgb(51,51,51);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YWthaXRlY2gvVGFrYWktVGVjaC9hbmltZS10cmFpbGVycy1uZXh0L2NvbXBvbmVudHMvQ2Fyb3VzZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa0c0QixBQUlnQyxBQUlJLEFBV1MsQUFLWCxBQUlGLFdBdkJmLEFBd0JlLEVBSmYsRUFoQmlCLE9BcUJrQixFQVZELDZCQVlsQyxDQVhBLG1DQVhxQixpQkFDRixlQUNHLGtCQUNlLGlDQUNkLG1CQUV2QiIsImZpbGUiOiIvVXNlcnMvdGFrYWl0ZWNoL1Rha2FpLVRlY2gvYW5pbWUtdHJhaWxlcnMtbmV4dC9jb21wb25lbnRzL0Nhcm91c2VsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVJlZn0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBGaWx0ZXJDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dHMvRmlsdGVyQ29udGV4dCdcbmltcG9ydCB7IFNlYXJjaENvbnRleHQgfSBmcm9tICcuLi9jb250ZXh0cy9TZWFyY2hDb250ZXh0J1xuaW1wb3J0IHsgQW5pbWVDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dHMvQW5pbWVDb250ZXh0J1xuaW1wb3J0IEFuaW1lIGZyb20gJy4vQW5pbWUnXG5cblxuXG5jb25zdCBDYXJvdXNlbCA9ICh7dG9wQW5pbWV9KSA9PiB7XG5cbiAgICBjb25zdCBbYW5pbWUsIHNldEFuaW1lXSA9IHVzZVN0YXRlKHRvcEFuaW1lKVxuICAgIGNvbnN0IHtmaWx0ZXJ9ID0gdXNlQ29udGV4dChGaWx0ZXJDb250ZXh0KVxuICAgIGNvbnN0IHtxdWVyeX0gPSB1c2VDb250ZXh0KFNlYXJjaENvbnRleHQpXG4gICAgY29uc3Qge3NlbGVjdGVkLCBkaXNwYXRjaH0gPSB1c2VDb250ZXh0KEFuaW1lQ29udGV4dClcbiAgICBcbiAgICBjb25zdCBbc2Nyb2xsUGVyY2VudCwgc2V0U2Nyb2xsUGVyY2VudF0gPSB1c2VTdGF0ZSgnMCUnKVxuICAgIGNvbnN0IGNhcm91c2VsU2VsZWN0b3IgPSB1c2VSZWYoKVxuXG4gICAgY29uc3QgW2lzRG93biwgc2V0SXNEb3duXSA9IHVzZVN0YXRlKGZhbHNlKVxuICAgIGNvbnN0IFtzdGFydFgsIHNldFN0YXJ0WF0gPSB1c2VTdGF0ZSgpXG4gICAgY29uc3QgW3Njcm9sbExlZnQsIHNldFNjcm9sbExlZnRdID0gdXNlU3RhdGUoKVxuXG4gICAgbGV0IG9uTW91c2VEb3duID0gKGUpID0+IHtcbiAgICAgICAgc2V0SXNEb3duKHRydWUpXG4gICAgICAgIHNldFN0YXJ0WChlLnBhZ2VYIC0gY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50Lm9mZnNldExlZnQpIFxuICAgICAgICBzZXRTY3JvbGxMZWZ0KGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5zY3JvbGxMZWZ0KVxuICAgICAgICBcbiAgICB9XG5cbiAgICBsZXQgb25Nb3VzZUxlYXZlID0gKGUpID0+IHtcbiAgICAgICAgc2V0SXNEb3duKGZhbHNlKVxuXG4gICAgfVxuXG4gICAgbGV0IG9uTW91c2VVcCA9IChlKSA9PiB7XG4gICAgICAgIHNldElzRG93bihmYWxzZSlcblxuICAgIH1cblxuICAgIGxldCBvbk1vdXNlTW92ZSA9IChlKSA9PiB7XG4gICAgICAgIGlmKCFpc0Rvd24pIHJldHVyblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgY29uc3QgeCA9IGUucGFnZVhcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSAoeCAtIHN0YXJ0WCkgKiAyLjVcbiAgICAgICAgY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbExlZnQgPSAgKHNjcm9sbExlZnQgLSBkaXN0YW5jZSkgIFxuICAgICAgICBzZXRTY3JvbGxQZXJjZW50KChjYXJvdXNlbFNlbGVjdG9yLmN1cnJlbnQuc2Nyb2xsTGVmdCAvIChjYXJvdXNlbFNlbGVjdG9yLmN1cnJlbnQuc2Nyb2xsV2lkdGggLSBjYXJvdXNlbFNlbGVjdG9yLmN1cnJlbnQub2Zmc2V0V2lkdGgpKSAqIDEwMCApXG4gICAgfVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3QgdXJsID0gZmlsdGVyID09PSAndG9wJyA/ICdodHRwczovL2FwaS5qaWthbi5tb2UvdjMvdG9wL2FuaW1lLzEvYnlwb3B1bGFyaXR5JyA6ICdodHRwczovL2FwaS5qaWthbi5tb2UvdjMvdG9wL2FuaW1lLzEvdXBjb21pbmcnXG4gICAgICAgIGZldGNoKHVybClcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAudGhlbihyZXNwb25zZUpzb24gPT4gc2V0QW5pbWUocmVzcG9uc2VKc29uLnRvcCkpXG4gICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSApXG4gICAgfSxbZmlsdGVyXSlcbiAgICBcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7IFxuICAgICAgICBpZihxdWVyeSAhPT0gJycpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdFF1ZXJ5UGFyYW1zKHBhcmFtcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5SXRlbXMgPSBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgICAgICAgICAgICAgLm1hcChrZXkgPT4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKX1gKVxuICAgICAgICAgICAgICAgIHJldHVybiBxdWVyeUl0ZW1zLmpvaW4oJyYnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYmFzZXVybCA9ICdodHRwczovL2FwaS5qaWthbi5tb2UvdjMvc2VhcmNoL2FuaW1lJztcbiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgcTogcXVlcnksXG4gICAgICAgICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICAgICAgICB0eXBlOiAndHYnLFxuICAgICAgICAgICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCB1cmwgPSBiYXNldXJsICsgJz8nICsgZm9ybWF0UXVlcnlQYXJhbXMocGFyYW1zKTtcbiAgICAgICAgICAgIGZldGNoKHVybClcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlSnNvbiA9PiBzZXRBbmltZShyZXNwb25zZUpzb24ucmVzdWx0cykpXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikgKVxuXG4gICAgICAgIH1cbiAgICB9LFtxdWVyeV0pXG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaCh7dHlwZTonU0VMRUNUX0FOSU1FJywgc2VsZWN0ZWQ6IHt9fSlcbiAgICB9LFthbmltZV0pXG5cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2Fyb3VzZWxXcmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGNhcm91c2VsICR7aXNEb3duID09PSB0cnVlID8gJ2lzRG93bicgOiBcIlwifWB9XG4gICAgICAgICAgICAgICAgcmVmPXtjYXJvdXNlbFNlbGVjdG9yfVxuICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4gb25Nb3VzZURvd24oZSl9IFxuICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17KGUpID0+IG9uTW91c2VMZWF2ZShlKX0gXG4gICAgICAgICAgICAgICAgb25Nb3VzZVVwPXsoZSkgPT4gb25Nb3VzZVVwKGUpfSBcbiAgICAgICAgICAgICAgICBvbk1vdXNlTW92ZT17KGUpID0+IG9uTW91c2VNb3ZlKGUpfT5cbiAgICAgICAgICAgICAgICB7YW5pbWUubWFwKChhbmltZSxpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8QW5pbWUga2V5PXtpbmRleH0gYW5pbWU9e2FuaW1lfSAvPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcblxuICAgICAgICAgICAgICAgIC5jYXJvdXNlbFdyYXBwZXIge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuY2Fyb3VzZWwge1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDE3NXB4O1xuICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IHNjcm9sbDsgLyogaGFzIHRvIGJlIHNjcm9sbCwgbm90IGF1dG8gKi9cbiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhcm91c2VsIHtcbiAgICAgICAgICAgICAgICAgICAgLW1zLW92ZXJmbG93LXN0eWxlOiBub25lOyAgLy8gSUUgMTArXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAtbW96LXNjcm9sbGJhcnMtbm9uZTsgIC8vIEZpcmVmb3hcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLmNhcm91c2VsOjotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7IC8vIFNhZmFyaSBhbmQgQ2hyb21lXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLnNjcm9sbEJhciB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDZweDtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDUxLDUxLDUxKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzY3JvbGxCYXJcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJvdXNlbFxuIl19 */\\n/*@ sourceURL=/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js */\")), __jsx(\"div\", {\n    className: \"scrollBar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }));\n};\n\nexport default Carousel;","map":{"version":3,"sources":["/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js"],"names":["React","useState","useContext","useEffect","useRef","FilterContext","SearchContext","AnimeContext","Anime","Carousel","topAnime","anime","setAnime","filter","query","selected","dispatch","scrollPercent","setScrollPercent","carouselSelector","isDown","setIsDown","startX","setStartX","scrollLeft","setScrollLeft","onMouseDown","e","pageX","current","offsetLeft","onMouseLeave","onMouseUp","onMouseMove","preventDefault","x","distance","scrollWidth","offsetWidth","url","fetch","then","response","json","responseJson","top","err","console","log","formatQueryParams","params","queryItems","map","key","encodeURIComponent","join","baseurl","q","page","type","limit","results","index"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef} from 'react'\nimport { FilterContext } from '../contexts/FilterContext'\nimport { SearchContext } from '../contexts/SearchContext'\nimport { AnimeContext } from '../contexts/AnimeContext'\nimport Anime from './Anime'\n\n\n\nconst Carousel = ({topAnime}) => {\n\n    const [anime, setAnime] = useState(topAnime)\n    const {filter} = useContext(FilterContext)\n    const {query} = useContext(SearchContext)\n    const {selected, dispatch} = useContext(AnimeContext)\n    \n    const [scrollPercent, setScrollPercent] = useState('0%')\n    const carouselSelector = useRef()\n\n    const [isDown, setIsDown] = useState(false)\n    const [startX, setStartX] = useState()\n    const [scrollLeft, setScrollLeft] = useState()\n\n    let onMouseDown = (e) => {\n        setIsDown(true)\n        setStartX(e.pageX - carouselSelector.current.offsetLeft) \n        setScrollLeft(carouselSelector.current.scrollLeft)\n        \n    }\n\n    let onMouseLeave = (e) => {\n        setIsDown(false)\n\n    }\n\n    let onMouseUp = (e) => {\n        setIsDown(false)\n\n    }\n\n    let onMouseMove = (e) => {\n        if(!isDown) return\n        e.preventDefault()\n        const x = e.pageX\n        const distance = (x - startX) * 2.5\n        carouselSelector.current.scrollLeft =  (scrollLeft - distance)  \n        setScrollPercent((carouselSelector.current.scrollLeft / (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth)) * 100 )\n    }\n\n    useEffect(() => {\n        const url = filter === 'top' ? 'https://api.jikan.moe/v3/top/anime/1/bypopularity' : 'https://api.jikan.moe/v3/top/anime/1/upcoming'\n        fetch(url)\n        .then(response => response.json())\n        .then(responseJson => setAnime(responseJson.top))\n        .catch(err => console.log(err) )\n    },[filter])\n    \n\n    useEffect(() => { \n        if(query !== '') {\n            function formatQueryParams(params) {\n                const queryItems = Object.keys(params)\n                .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)\n                return queryItems.join('&');\n            }\n            \n            const baseurl = 'https://api.jikan.moe/v3/search/anime';\n            let params = {\n                q: query,\n                page: 1,\n                type: 'tv',\n                limit: 10,\n            };\n            \n            let url = baseurl + '?' + formatQueryParams(params);\n            fetch(url)\n            .then(response => response.json())\n            .then(responseJson => setAnime(responseJson.results))\n            .catch(err => console.log(err) )\n\n        }\n    },[query])\n\n    useEffect(() => {\n        dispatch({type:'SELECT_ANIME', selected: {}})\n    },[anime])\n\n\n    return (\n        <div className=\"carouselWrapper\">\n            <div className={`carousel ${isDown === true ? 'isDown' : \"\"}`}\n                ref={carouselSelector}\n                onMouseDown={(e) => onMouseDown(e)} \n                onMouseLeave={(e) => onMouseLeave(e)} \n                onMouseUp={(e) => onMouseUp(e)} \n                onMouseMove={(e) => onMouseMove(e)}>\n                {anime.map((anime,index) => (\n                    <Anime key={index} anime={anime} />\n                ))}\n                <style jsx>{`\n\n                .carouselWrapper {\n                    width: 100%;\n                }\n\n                .carousel {\n                    cursor: pointer;\n                    display: flex;\n                    min-height: 175px;\n                    max-width: 100%;\n                    overflow-y: scroll; /* has to be scroll, not auto */\n                    -webkit-overflow-scrolling: touch;\n                    padding-bottom: 5px;\n\n                }\n\n                .carousel {\n                    -ms-overflow-style: none;  // IE 10+\n                    overflow: -moz-scrollbars-none;  // Firefox\n                }\n                \n                .carousel::-webkit-scrollbar {\n                    display: none; // Safari and Chrome\n                }\n\n                .scrollBar {\n                    width: 100%;\n                    height: 6px;\n                    background-color: rgb(51,51,51);\n\n                }\n\n                `}</style>\n            </div>\n            <div className=\"scrollBar\"></div>\n        </div>\n    )\n}\n\nexport default Carousel\n"]},"metadata":{},"sourceType":"module"}