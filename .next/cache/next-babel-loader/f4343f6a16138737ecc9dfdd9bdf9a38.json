{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect, useRef } from \"react\";\nimport { FilterContext } from \"../contexts/FilterContext\";\nimport { SearchContext } from \"../contexts/SearchContext\";\nimport { AnimeContext } from \"../contexts/AnimeContext\";\nimport Anime from \"./Anime\";\nimport { device } from \"../devices\";\nimport Loader from 'react-loader-spinner';\n\nvar Carousel = function Carousel(_ref) {\n  var topAnime = _ref.topAnime;\n\n  var _useState = useState(topAnime),\n      anime = _useState[0],\n      setAnime = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useContext = useContext(FilterContext),\n      filter = _useContext.filter;\n\n  var _useContext2 = useContext(SearchContext),\n      search = _useContext2.search;\n\n  var _useContext3 = useContext(AnimeContext),\n      selected = _useContext3.selected,\n      dispatch = _useContext3.dispatch;\n\n  var carouselSelector = useRef();\n\n  var _useState3 = useState(\"0\"),\n      scrollProgress = _useState3[0],\n      setScrollProgress = _useState3[1];\n\n  var getScrollPercent = function getScrollPercent() {\n    return carouselSelector.current.scrollLeft / (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth) * 100;\n  };\n\n  var _useState4 = useState(false),\n      isDown = _useState4[0],\n      setIsDown = _useState4[1];\n\n  var _useState5 = useState(),\n      startX = _useState5[0],\n      setStartX = _useState5[1];\n\n  var _useState6 = useState(),\n      scrollLeft = _useState6[0],\n      setScrollLeft = _useState6[1];\n\n  var changeAnime = function changeAnime(response) {\n    setAnime(response);\n\n    if (filter !== \"init\") {\n      var element = carouselSelector.current;\n      element.classList.remove(\"wipeContent\");\n      void element.offsetWidth;\n      element.classList.add(\"wipeContent\");\n    }\n  };\n\n  var _onMouseDown = function onMouseDown(e) {\n    setIsDown(true);\n    setStartX(e.pageX - carouselSelector.current.offsetLeft);\n    setScrollLeft(carouselSelector.current.scrollLeft);\n  };\n\n  var _onMouseLeave = function onMouseLeave(e) {\n    setIsDown(false);\n  };\n\n  var _onMouseUp = function onMouseUp(e) {\n    setIsDown(false);\n  };\n\n  var _onMouseMove = function onMouseMove(e) {\n    if (!isDown) return;\n    e.preventDefault();\n    var x = e.pageX;\n    var distance = (x - startX) * 3;\n    carouselSelector.current.scrollLeft = scrollLeft - distance;\n    var scrollPercent = getScrollPercent();\n    setScrollProgress(scrollPercent);\n  };\n\n  var _onTouchMove = function onTouchMove(e) {\n    var scrollPercent = getScrollPercent();\n    setScrollProgress(scrollPercent);\n  };\n\n  useEffect(function () {\n    var url = filter === \"top\" || filter === \"init\" ? \"https://api.jikan.moe/v3/top/anime/1/bypopularity\" : \"https://api.jikan.moe/v3/top/anime/1/upcoming\";\n    fetch(url).then(function (response) {\n      return response.json();\n    }).then(function (responseJson) {\n      return changeAnime(responseJson.top);\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  }, [filter]);\n  useEffect(function () {\n    if (search.query !== \"\") {\n      var formatQueryParams = function formatQueryParams(params) {\n        var queryItems = _Object$keys(params).map(function (key) {\n          return \"\".concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(params[key]));\n        });\n\n        return queryItems.join(\"&\");\n      };\n\n      var baseurl = \"https://api.jikan.moe/v3/search/anime\";\n      var params = {\n        q: search.query,\n        page: 1,\n        type: \"tv\",\n        limit: 10\n      };\n      var url = baseurl + \"?\" + formatQueryParams(params);\n      fetch(url).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        return setAnime(responseJson.results);\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    }\n  }, [search.query]);\n  useEffect(function () {\n    dispatch({\n      type: \"SELECT_ANIME\",\n      selected: {}\n    });\n  }, [anime]); // useEffect(() => {\n  //   console.log(filter)\n  //   if(filter === \"init\") {\n  //   } else {\n  //     let element = carouselSelector.current\n  //     element.classList.remove(\"wipeContent\")\n  //     void element.offsetWidth\n  //     element.classList.add(\"wipeContent\");\n  //   }\n  // }, [filter])\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1084216518\", [scrollProgress + '%', device.laptop]]]) + \" \" + \"carouselWrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, loading === true ? __jsx(Loader, {\n    style: styles,\n    type: \"Circles\",\n    color: \"#ef5050\",\n    height: 25,\n    width: 25,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }) : __jsx(\"div\", {\n    ref: carouselSelector,\n    onMouseDown: function onMouseDown(e) {\n      return _onMouseDown(e);\n    },\n    onMouseLeave: function onMouseLeave(e) {\n      return _onMouseLeave(e);\n    },\n    onMouseUp: function onMouseUp(e) {\n      return _onMouseUp(e);\n    },\n    onMouseMove: function onMouseMove(e) {\n      return _onMouseMove(e);\n    },\n    onTouchMove: function onTouchMove(e) {\n      return _onTouchMove(e);\n    },\n    className: _JSXStyle.dynamic([[\"1084216518\", [scrollProgress + '%', device.laptop]]]) + \" \" + \"carousel \".concat(isDown === true ? \"isDown\" : \"\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, anime.length === 0 ? __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"1084216518\", [scrollProgress + '%', device.laptop]]]),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"No Results\") : anime.map(function (anime, index) {\n    return __jsx(Anime, {\n      key: index,\n      anime: anime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    });\n  })), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1084216518\", [scrollProgress + '%', device.laptop]]]) + \" \" + \"scrollBar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }), __jsx(_JSXStyle, {\n    id: \"1084216518\",\n    dynamic: [scrollProgress + '%', device.laptop],\n    __self: this\n  }, \".carouselWrapper.__jsx-style-dynamic-selector{width:100%;-webkit-clip-path:polygon(2% 0,100% 0%,98% 100%,0% 100%);clip-path:polygon(2% 0,100% 0%,98% 100%,0% 100%);margin:10px auto;height:30%;}.carousel.__jsx-style-dynamic-selector{width:100%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:175px;height:100%;max-width:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.carousel.__jsx-style-dynamic-selector{-ms-overflow-style:none;overflow:-moz-scrollbars-none;}.carousel.__jsx-style-dynamic-selector::-webkit-scrollbar{display:none;}.carousel.__jsx-style-dynamic-selector p.__jsx-style-dynamic-selector{width:100%;}.scrollBar.__jsx-style-dynamic-selector{width:\".concat(scrollProgress + '%', \";height:2px;background-color:rgb(71,71,51);}.wipeContent.__jsx-style-dynamic-selector{-webkit-animation:wipeContent-__jsx-style-dynamic-selector 2s;animation:wipeContent-__jsx-style-dynamic-selector 2s;}@-webkit-keyframes wipeContent-__jsx-style-dynamic-selector{0%{width:0%;opacity:0;}100%{width:100%;}}@keyframes wipeContent-__jsx-style-dynamic-selector{0%{width:0%;opacity:0;}100%{width:100%;}}@media \").concat(device.laptop, \"{.carouselWrapper.__jsx-style-dynamic-selector{width:80%;margin:20px auto;position:relative;right:1.7%;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YWthaXRlY2gvVGFrYWktVGVjaC9hbmltZS10cmFpbGVycy1uZXh0L2NvbXBvbmVudHMvQ2Fyb3VzZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNEprQixBQUd3QixBQVFGLEFBYWEsQUFLWCxBQUlGLEFBSXdCLEFBTVYsQUFLZCxBQU1FLEFBTUMsU0FYRixDQVlTLENBekRpQyxBQVF2QyxBQXNCakIsQUFxQkUsRUF6QkYsTUFvQkUsS0F6QjhCLEVBWmpCLENBaURTLFFBeEJYLFVBeUJJLENBeEJrQixRQWJuQyxFQXNDSSxxQkF4QkosdUJBMUJtQixnQkE4Qm5CLENBdkNxQixBQVVQLFlBQ0csS0FWRixVQVdLLENBVHBCLGlCQVVtQyxpQ0FDZixrQkFDQyw2RkFDckIiLCJmaWxlIjoiL1VzZXJzL3Rha2FpdGVjaC9UYWthaS1UZWNoL2FuaW1lLXRyYWlsZXJzLW5leHQvY29tcG9uZW50cy9DYXJvdXNlbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEZpbHRlckNvbnRleHQgfSBmcm9tIFwiLi4vY29udGV4dHMvRmlsdGVyQ29udGV4dFwiO1xuaW1wb3J0IHsgU2VhcmNoQ29udGV4dCB9IGZyb20gXCIuLi9jb250ZXh0cy9TZWFyY2hDb250ZXh0XCI7XG5pbXBvcnQgeyBBbmltZUNvbnRleHQgfSBmcm9tIFwiLi4vY29udGV4dHMvQW5pbWVDb250ZXh0XCI7XG5pbXBvcnQgQW5pbWUgZnJvbSBcIi4vQW5pbWVcIjtcbmltcG9ydCB7ZGV2aWNlfSBmcm9tIFwiLi4vZGV2aWNlc1wiXG5pbXBvcnQgTG9hZGVyIGZyb20gJ3JlYWN0LWxvYWRlci1zcGlubmVyJ1xuXG5cbmNvbnN0IENhcm91c2VsID0gKHsgdG9wQW5pbWUgfSkgPT4ge1xuICBjb25zdCBbYW5pbWUsIHNldEFuaW1lXSA9IHVzZVN0YXRlKHRvcEFuaW1lKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgeyBmaWx0ZXIgfSA9IHVzZUNvbnRleHQoRmlsdGVyQ29udGV4dCk7XG4gIGNvbnN0IHsgc2VhcmNoIH0gPSB1c2VDb250ZXh0KFNlYXJjaENvbnRleHQpO1xuICBjb25zdCB7IHNlbGVjdGVkLCBkaXNwYXRjaCB9ID0gdXNlQ29udGV4dChBbmltZUNvbnRleHQpO1xuXG4gIGNvbnN0IGNhcm91c2VsU2VsZWN0b3IgPSB1c2VSZWYoKTtcbiAgY29uc3QgW3Njcm9sbFByb2dyZXNzLCBzZXRTY3JvbGxQcm9ncmVzc10gPSB1c2VTdGF0ZShcIjBcIik7XG4gICAgbGV0IGdldFNjcm9sbFBlcmNlbnQgPSAoKSA9PiB7XG4gICAgICAgcmV0dXJuICAoY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbExlZnQgL1xuICAgICAgICAgICAgKGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5zY3JvbGxXaWR0aCAtIGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5vZmZzZXRXaWR0aCkpICogMTAwXG4gICAgfVxuXG4gIGNvbnN0IFtpc0Rvd24sIHNldElzRG93bl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzdGFydFgsIHNldFN0YXJ0WF0gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBbc2Nyb2xsTGVmdCwgc2V0U2Nyb2xsTGVmdF0gPSB1c2VTdGF0ZSgpO1xuXG4gIGxldCBjaGFuZ2VBbmltZSA9IChyZXNwb25zZSkgPT4ge1xuXG4gICAgc2V0QW5pbWUocmVzcG9uc2UpXG4gICAgaWYoIGZpbHRlciAhPT0gXCJpbml0XCIpIHtcblxuICAgIGxldCBlbGVtZW50ID0gY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIndpcGVDb250ZW50XCIpXG4gICAgICAgIHZvaWQgZWxlbWVudC5vZmZzZXRXaWR0aFxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ3aXBlQ29udGVudFwiKTtcblxuICAgIH1cbiAgfVxuXG5cbiAgbGV0IG9uTW91c2VEb3duID0gZSA9PiB7XG4gICAgc2V0SXNEb3duKHRydWUpO1xuICAgIHNldFN0YXJ0WChlLnBhZ2VYIC0gY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50Lm9mZnNldExlZnQpO1xuICAgIHNldFNjcm9sbExlZnQoY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbExlZnQpO1xuICB9O1xuXG4gIGxldCBvbk1vdXNlTGVhdmUgPSBlID0+IHtcbiAgICBzZXRJc0Rvd24oZmFsc2UpO1xuICB9O1xuXG4gIGxldCBvbk1vdXNlVXAgPSBlID0+IHtcbiAgICBzZXRJc0Rvd24oZmFsc2UpO1xuICB9O1xuXG4gIGxldCBvbk1vdXNlTW92ZSA9IGUgPT4ge1xuICAgIGlmICghaXNEb3duKSByZXR1cm47XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHggPSBlLnBhZ2VYO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gKHggLSBzdGFydFgpICogMztcbiAgICBjYXJvdXNlbFNlbGVjdG9yLmN1cnJlbnQuc2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQgLSBkaXN0YW5jZTtcbiAgIFxuICAgIGxldCBzY3JvbGxQZXJjZW50ID0gZ2V0U2Nyb2xsUGVyY2VudCgpXG4gICAgc2V0U2Nyb2xsUHJvZ3Jlc3Moc2Nyb2xsUGVyY2VudCk7XG4gICAgXG4gIH07XG5cbiAgbGV0IG9uVG91Y2hNb3ZlID0gZSA9PiB7XG4gICAgbGV0IHNjcm9sbFBlcmNlbnQgPSBnZXRTY3JvbGxQZXJjZW50KClcbiAgICBzZXRTY3JvbGxQcm9ncmVzcyhzY3JvbGxQZXJjZW50KTtcbn1cblxuXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB1cmwgPVxuICAgICAgZmlsdGVyID09PSBcInRvcFwiIHx8IGZpbHRlciA9PT0gXCJpbml0XCJcbiAgICAgICAgPyBcImh0dHBzOi8vYXBpLmppa2FuLm1vZS92My90b3AvYW5pbWUvMS9ieXBvcHVsYXJpdHlcIlxuICAgICAgICA6IFwiaHR0cHM6Ly9hcGkuamlrYW4ubW9lL3YzL3RvcC9hbmltZS8xL3VwY29taW5nXCI7XG4gICAgZmV0Y2godXJsKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4ocmVzcG9uc2VKc29uID0+IGNoYW5nZUFuaW1lKHJlc3BvbnNlSnNvbi50b3ApKVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxuICB9LCBbZmlsdGVyXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2VhcmNoLnF1ZXJ5ICE9PSBcIlwiKSB7XG4gICAgICBmdW5jdGlvbiBmb3JtYXRRdWVyeVBhcmFtcyhwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcXVlcnlJdGVtcyA9IE9iamVjdC5rZXlzKHBhcmFtcykubWFwKFxuICAgICAgICAgIGtleSA9PiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pfWBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5SXRlbXMuam9pbihcIiZcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJhc2V1cmwgPSBcImh0dHBzOi8vYXBpLmppa2FuLm1vZS92My9zZWFyY2gvYW5pbWVcIjtcbiAgICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICAgIHE6IHNlYXJjaC5xdWVyeSxcbiAgICAgICAgcGFnZTogMSxcbiAgICAgICAgdHlwZTogXCJ0dlwiLFxuICAgICAgICBsaW1pdDogMTBcbiAgICAgIH07XG5cbiAgICAgIGxldCB1cmwgPSBiYXNldXJsICsgXCI/XCIgKyBmb3JtYXRRdWVyeVBhcmFtcyhwYXJhbXMpO1xuICAgICAgZmV0Y2godXJsKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlSnNvbiA9PiBzZXRBbmltZShyZXNwb25zZUpzb24ucmVzdWx0cykpXG4gICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgfVxuICB9LCBbc2VhcmNoLnF1ZXJ5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6IFwiU0VMRUNUX0FOSU1FXCIsIHNlbGVjdGVkOiB7fSB9KTtcbiAgfSwgW2FuaW1lXSk7XG5cbiAgLy8gdXNlRWZmZWN0KCgpID0+IHtcbiAgLy8gICBjb25zb2xlLmxvZyhmaWx0ZXIpXG4gIC8vICAgaWYoZmlsdGVyID09PSBcImluaXRcIikge1xuXG4gIC8vICAgfSBlbHNlIHtcbiAgLy8gICAgIGxldCBlbGVtZW50ID0gY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50XG4gIC8vICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJ3aXBlQ29udGVudFwiKVxuICAvLyAgICAgdm9pZCBlbGVtZW50Lm9mZnNldFdpZHRoXG4gIC8vICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ3aXBlQ29udGVudFwiKTtcbiAgLy8gICB9XG4gIC8vIH0sIFtmaWx0ZXJdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjYXJvdXNlbFdyYXBwZXJcIj5cbiAgICAgIHtsb2FkaW5nID09PSB0cnVlID8gXG4gICAgICA8TG9hZGVyIHN0eWxlPXtzdHlsZXN9IHR5cGU9XCJDaXJjbGVzXCIgY29sb3I9XCIjZWY1MDUwXCIgaGVpZ2h0PXsyNX0gd2lkdGg9ezI1fSAvPlxuICAgICAgOlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9e2BjYXJvdXNlbCAke2lzRG93biA9PT0gdHJ1ZSA/IFwiaXNEb3duXCIgOiBcIlwifWB9XG4gICAgICAgIHJlZj17Y2Fyb3VzZWxTZWxlY3Rvcn1cbiAgICAgICAgb25Nb3VzZURvd249e2UgPT4gb25Nb3VzZURvd24oZSl9XG4gICAgICAgIG9uTW91c2VMZWF2ZT17ZSA9PiBvbk1vdXNlTGVhdmUoZSl9XG4gICAgICAgIG9uTW91c2VVcD17ZSA9PiBvbk1vdXNlVXAoZSl9XG4gICAgICAgIG9uTW91c2VNb3ZlPXtlID0+IG9uTW91c2VNb3ZlKGUpfVxuICAgICAgICBvblRvdWNoTW92ZT17ZSA9PiBvblRvdWNoTW92ZShlKX1cblxuICAgICAgPlxuICAgICAgICBcbiAgICAgICAge1xuICAgICAgICAgIGFuaW1lLmxlbmd0aCA9PT0gMCA/IFxuICAgICAgICAgIDxwPk5vIFJlc3VsdHM8L3A+XG4gICAgICAgICAgOlxuICAgICAgICAgIGFuaW1lLm1hcCgoYW5pbWUsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICA8QW5pbWUga2V5PXtpbmRleH0gYW5pbWU9e2FuaW1lfSAvPlxuICAgICAgICAgICkpXG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgICAgIH1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2Nyb2xsQmFyXCI+PC9kaXY+XG4gICAgIFxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAuY2Fyb3VzZWxXcmFwcGVyIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgY2xpcC1wYXRoOiBwb2x5Z29uKDIlIDAsIDEwMCUgMCUsIDk4JSAxMDAlLCAwJSAxMDAlKTtcbiAgICAgICAgICAgIG1hcmdpbjogMTBweCBhdXRvO1xuICAgICAgICAgICAgaGVpZ2h0OiAzMCU7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJvdXNlbCB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgbWluLWhlaWdodDogMTc1cHg7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBzY3JvbGw7IC8qIGhhcyB0byBiZSBzY3JvbGwsIG5vdCBhdXRvICovXG4gICAgICAgICAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNhcm91c2VsIHtcbiAgICAgICAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7IC8vIElFIDEwK1xuICAgICAgICAgIG92ZXJmbG93OiAtbW96LXNjcm9sbGJhcnMtbm9uZTsgLy8gRmlyZWZveFxuICAgICAgICB9XG5cbiAgICAgICAgLmNhcm91c2VsOjotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTsgLy8gU2FmYXJpIGFuZCBDaHJvbWVcbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJvdXNlbCBwIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5zY3JvbGxCYXIge1xuICAgICAgICAgIHdpZHRoOiAke3Njcm9sbFByb2dyZXNzICsgJyUnfTtcbiAgICAgICAgICBoZWlnaHQ6IDJweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNzEsIDcxLCA1MSk7XG4gICAgICAgIH1cblxuICAgICAgICAud2lwZUNvbnRlbnQge1xuICAgICAgICAgIGFuaW1hdGlvbjogd2lwZUNvbnRlbnQgMnM7XG4gICAgICAgIH1cblxuICAgICAgICBAa2V5ZnJhbWVzIHdpcGVDb250ZW50IHtcbiAgICAgICAgICAwJSB7XG4gICAgICAgICAgICB3aWR0aDogMCU7XG4gICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgIH1cblxuXG4gICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBAbWVkaWEgJHtkZXZpY2UubGFwdG9wfSB7XG4gICAgICAgICAgICAuY2Fyb3VzZWxXcmFwcGVyIHtcbiAgICAgICAgICAgICAgd2lkdGg6IDgwJTtcbiAgICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgcmlnaHQ6IDEuNyU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5zY3JvbGxCYXIge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENhcm91c2VsO1xuIl19 */\\n/*@ sourceURL=/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js */\")));\n};\n\nexport default Carousel;","map":{"version":3,"sources":["/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js"],"names":["React","useState","useContext","useEffect","useRef","FilterContext","SearchContext","AnimeContext","Anime","device","Loader","Carousel","topAnime","anime","setAnime","loading","setLoading","filter","search","selected","dispatch","carouselSelector","scrollProgress","setScrollProgress","getScrollPercent","current","scrollLeft","scrollWidth","offsetWidth","isDown","setIsDown","startX","setStartX","setScrollLeft","changeAnime","response","element","classList","remove","add","onMouseDown","e","pageX","offsetLeft","onMouseLeave","onMouseUp","onMouseMove","preventDefault","x","distance","scrollPercent","onTouchMove","url","fetch","then","json","responseJson","top","err","console","log","query","formatQueryParams","params","queryItems","map","key","encodeURIComponent","join","baseurl","q","page","type","limit","results","laptop","styles","length","index"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef } from \"react\";\nimport { FilterContext } from \"../contexts/FilterContext\";\nimport { SearchContext } from \"../contexts/SearchContext\";\nimport { AnimeContext } from \"../contexts/AnimeContext\";\nimport Anime from \"./Anime\";\nimport {device} from \"../devices\"\nimport Loader from 'react-loader-spinner'\n\n\nconst Carousel = ({ topAnime }) => {\n  const [anime, setAnime] = useState(topAnime);\n  const [loading, setLoading] = useState(false)\n\n  const { filter } = useContext(FilterContext);\n  const { search } = useContext(SearchContext);\n  const { selected, dispatch } = useContext(AnimeContext);\n\n  const carouselSelector = useRef();\n  const [scrollProgress, setScrollProgress] = useState(\"0\");\n    let getScrollPercent = () => {\n       return  (carouselSelector.current.scrollLeft /\n            (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth)) * 100\n    }\n\n  const [isDown, setIsDown] = useState(false);\n  const [startX, setStartX] = useState();\n  const [scrollLeft, setScrollLeft] = useState();\n\n  let changeAnime = (response) => {\n\n    setAnime(response)\n    if( filter !== \"init\") {\n\n    let element = carouselSelector.current\n        element.classList.remove(\"wipeContent\")\n        void element.offsetWidth\n        element.classList.add(\"wipeContent\");\n\n    }\n  }\n\n\n  let onMouseDown = e => {\n    setIsDown(true);\n    setStartX(e.pageX - carouselSelector.current.offsetLeft);\n    setScrollLeft(carouselSelector.current.scrollLeft);\n  };\n\n  let onMouseLeave = e => {\n    setIsDown(false);\n  };\n\n  let onMouseUp = e => {\n    setIsDown(false);\n  };\n\n  let onMouseMove = e => {\n    if (!isDown) return;\n    e.preventDefault();\n    const x = e.pageX;\n    const distance = (x - startX) * 3;\n    carouselSelector.current.scrollLeft = scrollLeft - distance;\n   \n    let scrollPercent = getScrollPercent()\n    setScrollProgress(scrollPercent);\n    \n  };\n\n  let onTouchMove = e => {\n    let scrollPercent = getScrollPercent()\n    setScrollProgress(scrollPercent);\n}\n\n\n\n  useEffect(() => {\n    const url =\n      filter === \"top\" || filter === \"init\"\n        ? \"https://api.jikan.moe/v3/top/anime/1/bypopularity\"\n        : \"https://api.jikan.moe/v3/top/anime/1/upcoming\";\n    fetch(url)\n      .then(response => response.json())\n      .then(responseJson => changeAnime(responseJson.top))\n      .catch(err => console.log(err));\n\n  }, [filter]);\n\n  useEffect(() => {\n    if (search.query !== \"\") {\n      function formatQueryParams(params) {\n        const queryItems = Object.keys(params).map(\n          key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n        );\n        return queryItems.join(\"&\");\n      }\n\n      const baseurl = \"https://api.jikan.moe/v3/search/anime\";\n      let params = {\n        q: search.query,\n        page: 1,\n        type: \"tv\",\n        limit: 10\n      };\n\n      let url = baseurl + \"?\" + formatQueryParams(params);\n      fetch(url)\n        .then(response => response.json())\n        .then(responseJson => setAnime(responseJson.results))\n        .catch(err => console.log(err));\n    }\n  }, [search.query]);\n\n  useEffect(() => {\n    dispatch({ type: \"SELECT_ANIME\", selected: {} });\n  }, [anime]);\n\n  // useEffect(() => {\n  //   console.log(filter)\n  //   if(filter === \"init\") {\n\n  //   } else {\n  //     let element = carouselSelector.current\n  //     element.classList.remove(\"wipeContent\")\n  //     void element.offsetWidth\n  //     element.classList.add(\"wipeContent\");\n  //   }\n  // }, [filter])\n\n  return (\n    <div className=\"carouselWrapper\">\n      {loading === true ? \n      <Loader style={styles} type=\"Circles\" color=\"#ef5050\" height={25} width={25} />\n      :\n      <div\n        className={`carousel ${isDown === true ? \"isDown\" : \"\"}`}\n        ref={carouselSelector}\n        onMouseDown={e => onMouseDown(e)}\n        onMouseLeave={e => onMouseLeave(e)}\n        onMouseUp={e => onMouseUp(e)}\n        onMouseMove={e => onMouseMove(e)}\n        onTouchMove={e => onTouchMove(e)}\n\n      >\n        \n        {\n          anime.length === 0 ? \n          <p>No Results</p>\n          :\n          anime.map((anime, index) => (\n            <Anime key={index} anime={anime} />\n          ))\n        }\n      </div>\n       }\n      <div className=\"scrollBar\"></div>\n     \n      <style jsx>{`\n        .carouselWrapper {\n            width: 100%;\n            clip-path: polygon(2% 0, 100% 0%, 98% 100%, 0% 100%);\n            margin: 10px auto;\n            height: 30%;\n\n        }\n\n        .carousel {\n          width: 100%;\n          cursor: pointer;\n          display: flex;\n          min-height: 175px;\n          height: 100%;\n          max-width: 100%;\n          overflow-y: scroll; /* has to be scroll, not auto */\n          -webkit-overflow-scrolling: touch;\n          text-align: center;\n          align-items: center;\n        }\n\n        .carousel {\n          -ms-overflow-style: none; // IE 10+\n          overflow: -moz-scrollbars-none; // Firefox\n        }\n\n        .carousel::-webkit-scrollbar {\n          display: none; // Safari and Chrome\n        }\n\n        .carousel p {\n          width: 100%;\n        }\n\n        .scrollBar {\n          width: ${scrollProgress + '%'};\n          height: 2px;\n          background-color: rgb(71, 71, 51);\n        }\n\n        .wipeContent {\n          animation: wipeContent 2s;\n        }\n\n        @keyframes wipeContent {\n          0% {\n            width: 0%;\n            opacity: 0;\n          }\n\n\n          100% {\n            width: 100%;\n          }\n        }\n\n        @media ${device.laptop} {\n            .carouselWrapper {\n              width: 80%;\n              margin: 20px auto;\n              position: relative;\n              right: 1.7%;\n            }\n\n            .scrollBar {\n\n            }\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default Carousel;\n"]},"metadata":{},"sourceType":"module"}