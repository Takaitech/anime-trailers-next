{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect, useRef } from \"react\";\nimport { FilterContext } from \"../contexts/FilterContext\";\nimport { SearchContext } from \"../contexts/SearchContext\";\nimport { AnimeContext } from \"../contexts/AnimeContext\";\nimport Anime from \"./Anime\";\nimport { device } from \"../devices\";\nimport Loader from 'react-loader-spinner';\n\nconst Carousel = ({\n  topAnime\n}) => {\n  const {\n    0: anime,\n    1: setAnime\n  } = useState(topAnime);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    filter\n  } = useContext(FilterContext);\n  const {\n    search\n  } = useContext(SearchContext);\n  const {\n    selected,\n    dispatch\n  } = useContext(AnimeContext);\n  const carouselSelector = useRef();\n  const {\n    0: scrollProgress,\n    1: setScrollProgress\n  } = useState(\"0\");\n\n  let getScrollPercent = () => {\n    return carouselSelector.current.scrollLeft / (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth) * 100;\n  };\n\n  const {\n    0: isDown,\n    1: setIsDown\n  } = useState(false);\n  const {\n    0: startX,\n    1: setStartX\n  } = useState();\n  const {\n    0: scrollLeft,\n    1: setScrollLeft\n  } = useState();\n\n  let changeAnime = response => {\n    setAnime(response);\n\n    if (filter !== \"init\") {\n      let element = carouselSelector.current;\n      element.classList.remove(\"wipeContent\");\n      void element.offsetWidth;\n      element.classList.add(\"wipeContent\");\n    }\n  }; //   let onMouseDown = e => {\n  //     setIsDown(true);\n  //     setStartX(e.pageX - carouselSelector.current.offsetLeft);\n  //     setScrollLeft(carouselSelector.current.scrollLeft);\n  //   };\n  //   let onMouseLeave = e => {\n  //     setIsDown(false);\n  //   };\n  //   let onMouseUp = e => {\n  //     setIsDown(false);\n  //   };\n  //   let onMouseMove = e => {\n  //     if (!isDown) return;\n  //     e.preventDefault();\n  //     const x = e.pageX;\n  //     const distance = (x - startX) * 3;\n  //     carouselSelector.current.scrollLeft = scrollLeft - distance;\n  //     let scrollPercent = getScrollPercent()\n  //     setScrollProgress(scrollPercent);\n  //   };\n  //   let onTouchMove = e => {\n  //     let scrollPercent = getScrollPercent()\n  //     setScrollProgress(scrollPercent);\n  // }\n\n\n  useEffect(() => {\n    let url = \"\";\n\n    if (filter === \"top\" || filter === \"init\") {\n      url = \"https://api.jikan.moe/v3/top/anime/1/bypopularity\";\n    } else if (filter === \"upcoming\") {\n      url = \"https://api.jikan.moe/v3/top/anime/1/upcoming\";\n    } else url = \"https://api.jikan.moe/v3/top/anime/1/movie\";\n\n    fetch(url).then(response => response.json()).then(responseJson => changeAnime(responseJson.top)).catch(err => console.log(err));\n  }, [filter]);\n  useEffect(() => {\n    if (search.query !== \"\") {\n      function formatQueryParams(params) {\n        const queryItems = _Object$keys(params).map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`);\n\n        return queryItems.join(\"&\");\n      }\n\n      const baseurl = \"https://api.jikan.moe/v3/search/anime\";\n      let params = {\n        q: search.query,\n        page: 1,\n        type: \"tv\",\n        limit: 20\n      };\n      let url = baseurl + \"?\" + formatQueryParams(params);\n      carouselSelector.current.classList.add('wipeContent');\n      setLoading(true);\n      fetch(url).then(response => response.json()).then(responseJson => setAnime(responseJson.results)).then(res => setTimeout(() => {\n        setLoading(false);\n        carouselSelector.current.classList.add('wipeContent');\n      }, 500)).catch(err => console.log(err));\n    }\n  }, [search.query]);\n  useEffect(() => {\n    dispatch({\n      type: \"SELECT_ANIME\",\n      selected: {}\n    });\n  }, [anime]); // useEffect(() => {\n  //   console.log(filter)\n  //   if(filter === \"init\") {\n  //   } else {\n  //     let element = carouselSelector.current\n  //     element.classList.remove(\"wipeContent\")\n  //     void element.offsetWidth\n  //     element.classList.add(\"wipeContent\");\n  //   }\n  // }, [filter])\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1921928994\", [scrollProgress + '%', device.laptop]]]) + \" \" + \"carouselWrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, loading === true ? __jsx(Loader, {\n    type: \"Circles\",\n    color: \"#ef5050\",\n    height: 45,\n    width: 45,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }) : __jsx(\"div\", {\n    ref: carouselSelector // onMouseDown={e => onMouseDown(e)}\n    // onMouseLeave={e => onMouseLeave(e)}\n    // onMouseUp={e => onMouseUp(e)}\n    // onMouseMove={e => onMouseMove(e)}\n    // onTouchMove={e => onTouchMove(e)}\n    ,\n    className: _JSXStyle.dynamic([[\"1921928994\", [scrollProgress + '%', device.laptop]]]) + \" \" + `carousel ${isDown === true ? \"isDown\" : \"\"} `,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, anime.length === 0 ? __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"1921928994\", [scrollProgress + '%', device.laptop]]]),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"No Results\") : anime.map((anime, index) => __jsx(Anime, {\n    key: index,\n    anime: anime,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }))), __jsx(_JSXStyle, {\n    id: \"1921928994\",\n    dynamic: [scrollProgress + '%', device.laptop],\n    __self: this\n  }, `.carouselWrapper.__jsx-style-dynamic-selector{width:90%;-webkit-clip-path:polygon(1% 0,100% 0%,98% 100%,0% 100%);clip-path:polygon(1% 0,100% 0%,98% 100%,0% 100%);margin:10px auto;height:30%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.carousel.__jsx-style-dynamic-selector{width:100%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:175px;height:100%;max-width:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-y:hidden;}.carousel.__jsx-style-dynamic-selector{-ms-overflow-style:none;overflow:-moz-scrollbars-none;}.carousel.__jsx-style-dynamic-selector::-webkit-scrollbar{display:none;}.carousel.__jsx-style-dynamic-selector p.__jsx-style-dynamic-selector{width:100%;}.scrollBar.__jsx-style-dynamic-selector{width:${scrollProgress + '%'};height:2px;background-color:rgb(71,71,51);}.wipeContent.__jsx-style-dynamic-selector{-webkit-animation:wipeContent-__jsx-style-dynamic-selector 2s;animation:wipeContent-__jsx-style-dynamic-selector 2s;}@-webkit-keyframes wipeContent-__jsx-style-dynamic-selector{0%{width:0%;opacity:0;}100%{width:100%;}}@keyframes wipeContent-__jsx-style-dynamic-selector{0%{width:0%;opacity:0;}100%{width:100%;}}@media ${device.laptop}{.carouselWrapper.__jsx-style-dynamic-selector{width:80.5%;margin:20px auto;position:relative;right:1.7%;}}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YWthaXRlY2gvVGFrYWktVGVjaC9hbmltZS10cmFpbGVycy1uZXh0L2NvbXBvbmVudHMvQ2Fyb3VzZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeUtrQixBQUd1QixBQVVELEFBY2EsQUFLWCxBQUlGLEFBSXdCLEFBTVYsQUFLZCxBQU1FLEFBTUcsU0FYSixDQWhEMEMsQ0FVdkMsQUF1QmpCLEFBcUJFLENBTXFCLENBL0J2QixNQW9CRSxLQXpCOEIsRUFiakIsR0FrRFMsTUF4QlgsV0FDc0IsQ0F3QmxCLE9BckNqQixJQXNDSSxtQkF4QkosdUJBM0JtQixnQkFYRSxBQTBDckIsQ0E5QmMsWUFDRyxJQVpGLFdBQ0UsQUFZRyxrQkFDZSxpQ0FDZixrQkFDQyxLQWRFLHdGQWVILEtBZE8sYUFlM0Isc0ZBZEEiLCJmaWxlIjoiL1VzZXJzL3Rha2FpdGVjaC9UYWthaS1UZWNoL2FuaW1lLXRyYWlsZXJzLW5leHQvY29tcG9uZW50cy9DYXJvdXNlbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEZpbHRlckNvbnRleHQgfSBmcm9tIFwiLi4vY29udGV4dHMvRmlsdGVyQ29udGV4dFwiO1xuaW1wb3J0IHsgU2VhcmNoQ29udGV4dCB9IGZyb20gXCIuLi9jb250ZXh0cy9TZWFyY2hDb250ZXh0XCI7XG5pbXBvcnQgeyBBbmltZUNvbnRleHQgfSBmcm9tIFwiLi4vY29udGV4dHMvQW5pbWVDb250ZXh0XCI7XG5pbXBvcnQgQW5pbWUgZnJvbSBcIi4vQW5pbWVcIjtcbmltcG9ydCB7ZGV2aWNlfSBmcm9tIFwiLi4vZGV2aWNlc1wiXG5pbXBvcnQgTG9hZGVyIGZyb20gJ3JlYWN0LWxvYWRlci1zcGlubmVyJ1xuXG5cbmNvbnN0IENhcm91c2VsID0gKHsgdG9wQW5pbWUgfSkgPT4ge1xuICBjb25zdCBbYW5pbWUsIHNldEFuaW1lXSA9IHVzZVN0YXRlKHRvcEFuaW1lKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgeyBmaWx0ZXIgfSA9IHVzZUNvbnRleHQoRmlsdGVyQ29udGV4dCk7XG4gIGNvbnN0IHsgc2VhcmNoIH0gPSB1c2VDb250ZXh0KFNlYXJjaENvbnRleHQpO1xuICBjb25zdCB7IHNlbGVjdGVkLCBkaXNwYXRjaCB9ID0gdXNlQ29udGV4dChBbmltZUNvbnRleHQpO1xuXG4gIGNvbnN0IGNhcm91c2VsU2VsZWN0b3IgPSB1c2VSZWYoKTtcbiAgY29uc3QgW3Njcm9sbFByb2dyZXNzLCBzZXRTY3JvbGxQcm9ncmVzc10gPSB1c2VTdGF0ZShcIjBcIik7XG4gICAgbGV0IGdldFNjcm9sbFBlcmNlbnQgPSAoKSA9PiB7XG4gICAgICAgcmV0dXJuICAoY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbExlZnQgL1xuICAgICAgICAgICAgKGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5zY3JvbGxXaWR0aCAtIGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5vZmZzZXRXaWR0aCkpICogMTAwXG4gICAgfVxuXG4gIGNvbnN0IFtpc0Rvd24sIHNldElzRG93bl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzdGFydFgsIHNldFN0YXJ0WF0gPSB1c2VTdGF0ZSgpO1xuICBjb25zdCBbc2Nyb2xsTGVmdCwgc2V0U2Nyb2xsTGVmdF0gPSB1c2VTdGF0ZSgpO1xuXG4gIGxldCBjaGFuZ2VBbmltZSA9IChyZXNwb25zZSkgPT4ge1xuXG4gICAgc2V0QW5pbWUocmVzcG9uc2UpXG4gICAgaWYoIGZpbHRlciAhPT0gXCJpbml0XCIpIHtcblxuICAgIGxldCBlbGVtZW50ID0gY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIndpcGVDb250ZW50XCIpXG4gICAgICAgIHZvaWQgZWxlbWVudC5vZmZzZXRXaWR0aFxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ3aXBlQ29udGVudFwiKTtcblxuICAgIH1cbiAgfVxuXG5cbi8vICAgbGV0IG9uTW91c2VEb3duID0gZSA9PiB7XG4vLyAgICAgc2V0SXNEb3duKHRydWUpO1xuLy8gICAgIHNldFN0YXJ0WChlLnBhZ2VYIC0gY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50Lm9mZnNldExlZnQpO1xuLy8gICAgIHNldFNjcm9sbExlZnQoY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbExlZnQpO1xuLy8gICB9O1xuXG4vLyAgIGxldCBvbk1vdXNlTGVhdmUgPSBlID0+IHtcbi8vICAgICBzZXRJc0Rvd24oZmFsc2UpO1xuLy8gICB9O1xuXG4vLyAgIGxldCBvbk1vdXNlVXAgPSBlID0+IHtcbi8vICAgICBzZXRJc0Rvd24oZmFsc2UpO1xuLy8gICB9O1xuXG4vLyAgIGxldCBvbk1vdXNlTW92ZSA9IGUgPT4ge1xuLy8gICAgIGlmICghaXNEb3duKSByZXR1cm47XG4vLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgIGNvbnN0IHggPSBlLnBhZ2VYO1xuLy8gICAgIGNvbnN0IGRpc3RhbmNlID0gKHggLSBzdGFydFgpICogMztcbi8vICAgICBjYXJvdXNlbFNlbGVjdG9yLmN1cnJlbnQuc2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQgLSBkaXN0YW5jZTtcbiAgIFxuLy8gICAgIGxldCBzY3JvbGxQZXJjZW50ID0gZ2V0U2Nyb2xsUGVyY2VudCgpXG4vLyAgICAgc2V0U2Nyb2xsUHJvZ3Jlc3Moc2Nyb2xsUGVyY2VudCk7XG4gICAgXG4vLyAgIH07XG5cbi8vICAgbGV0IG9uVG91Y2hNb3ZlID0gZSA9PiB7XG4vLyAgICAgbGV0IHNjcm9sbFBlcmNlbnQgPSBnZXRTY3JvbGxQZXJjZW50KClcbi8vICAgICBzZXRTY3JvbGxQcm9ncmVzcyhzY3JvbGxQZXJjZW50KTtcbi8vIH1cblxuXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgdXJsID0gXCJcIlxuXG4gICAgaWYoZmlsdGVyID09PSBcInRvcFwiIHx8IGZpbHRlciA9PT0gXCJpbml0XCIpIHtcbiAgICAgIHVybCA9IFwiaHR0cHM6Ly9hcGkuamlrYW4ubW9lL3YzL3RvcC9hbmltZS8xL2J5cG9wdWxhcml0eVwiXG4gICAgfSBlbHNlIGlmKGZpbHRlciA9PT0gXCJ1cGNvbWluZ1wiKSB7XG4gICAgICB1cmwgPSBcImh0dHBzOi8vYXBpLmppa2FuLm1vZS92My90b3AvYW5pbWUvMS91cGNvbWluZ1wiXG4gICAgfSBlbHNlKFxuICAgICAgdXJsID0gXCJodHRwczovL2FwaS5qaWthbi5tb2UvdjMvdG9wL2FuaW1lLzEvbW92aWVcIlxuICAgIClcbiAgICAgXG4gICAgZmV0Y2godXJsKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4ocmVzcG9uc2VKc29uID0+IGNoYW5nZUFuaW1lKHJlc3BvbnNlSnNvbi50b3ApKVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxuICB9LCBbZmlsdGVyXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2VhcmNoLnF1ZXJ5ICE9PSBcIlwiKSB7XG4gICAgICBmdW5jdGlvbiBmb3JtYXRRdWVyeVBhcmFtcyhwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcXVlcnlJdGVtcyA9IE9iamVjdC5rZXlzKHBhcmFtcykubWFwKFxuICAgICAgICAgIGtleSA9PiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pfWBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5SXRlbXMuam9pbihcIiZcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJhc2V1cmwgPSBcImh0dHBzOi8vYXBpLmppa2FuLm1vZS92My9zZWFyY2gvYW5pbWVcIjtcbiAgICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICAgIHE6IHNlYXJjaC5xdWVyeSxcbiAgICAgICAgcGFnZTogMSxcbiAgICAgICAgdHlwZTogXCJ0dlwiLFxuICAgICAgICBsaW1pdDogMjBcbiAgICAgIH07XG5cbiAgICAgIGxldCB1cmwgPSBiYXNldXJsICsgXCI/XCIgKyBmb3JtYXRRdWVyeVBhcmFtcyhwYXJhbXMpO1xuICAgICAgICAgIGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5jbGFzc0xpc3QuYWRkKCd3aXBlQ29udGVudCcpXG4gICAgICBzZXRMb2FkaW5nKHRydWUpXG4gICAgICBmZXRjaCh1cmwpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2VKc29uID0+IHNldEFuaW1lKHJlc3BvbnNlSnNvbi5yZXN1bHRzKSApXG4gICAgICAgIC50aGVuKHJlcyA9PiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgICAgICAgIGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5jbGFzc0xpc3QuYWRkKCd3aXBlQ29udGVudCcpXG4gICAgICAgIH0sNTAwKSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICB9XG4gIH0sIFtzZWFyY2gucXVlcnldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRpc3BhdGNoKHsgdHlwZTogXCJTRUxFQ1RfQU5JTUVcIiwgc2VsZWN0ZWQ6IHt9IH0pO1xuICB9LCBbYW5pbWVdKTtcblxuICAvLyB1c2VFZmZlY3QoKCkgPT4ge1xuICAvLyAgIGNvbnNvbGUubG9nKGZpbHRlcilcbiAgLy8gICBpZihmaWx0ZXIgPT09IFwiaW5pdFwiKSB7XG5cbiAgLy8gICB9IGVsc2Uge1xuICAvLyAgICAgbGV0IGVsZW1lbnQgPSBjYXJvdXNlbFNlbGVjdG9yLmN1cnJlbnRcbiAgLy8gICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIndpcGVDb250ZW50XCIpXG4gIC8vICAgICB2b2lkIGVsZW1lbnQub2Zmc2V0V2lkdGhcbiAgLy8gICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIndpcGVDb250ZW50XCIpO1xuICAvLyAgIH1cbiAgLy8gfSwgW2ZpbHRlcl0pXG5cblxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjYXJvdXNlbFdyYXBwZXJcIiBcbiAgICA+XG4gICAgICB7bG9hZGluZyA9PT0gdHJ1ZSA/IFxuICAgICAgPExvYWRlciAgdHlwZT1cIkNpcmNsZXNcIiBjb2xvcj1cIiNlZjUwNTBcIiBoZWlnaHQ9ezQ1fSB3aWR0aD17NDV9IC8+XG4gICAgICA6XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17YGNhcm91c2VsICR7aXNEb3duID09PSB0cnVlID8gXCJpc0Rvd25cIiA6IFwiXCJ9IGB9XG4gICAgICAgIHJlZj17Y2Fyb3VzZWxTZWxlY3Rvcn1cbiAgICAgICAgLy8gb25Nb3VzZURvd249e2UgPT4gb25Nb3VzZURvd24oZSl9XG4gICAgICAgIC8vIG9uTW91c2VMZWF2ZT17ZSA9PiBvbk1vdXNlTGVhdmUoZSl9XG4gICAgICAgIC8vIG9uTW91c2VVcD17ZSA9PiBvbk1vdXNlVXAoZSl9XG4gICAgICAgIC8vIG9uTW91c2VNb3ZlPXtlID0+IG9uTW91c2VNb3ZlKGUpfVxuICAgICAgICAvLyBvblRvdWNoTW92ZT17ZSA9PiBvblRvdWNoTW92ZShlKX1cblxuICAgICAgPlxuICAgICAgICBcbiAgICAgICAge1xuICAgICAgICAgIGFuaW1lLmxlbmd0aCA9PT0gMCA/IFxuICAgICAgICAgIDxwPk5vIFJlc3VsdHM8L3A+XG4gICAgICAgICAgOlxuICAgICAgICAgIGFuaW1lLm1hcCgoYW5pbWUsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICA8QW5pbWUga2V5PXtpbmRleH0gYW5pbWU9e2FuaW1lfSAvPlxuICAgICAgICAgICkpXG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgICAgfVxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAuY2Fyb3VzZWxXcmFwcGVyIHtcbiAgICAgICAgICAgIHdpZHRoOiA5MCU7XG4gICAgICAgICAgICBjbGlwLXBhdGg6IHBvbHlnb24oMSUgMCwgMTAwJSAwJSwgOTglIDEwMCUsIDAlIDEwMCUpO1xuICAgICAgICAgICAgbWFyZ2luOiAxMHB4IGF1dG87XG4gICAgICAgICAgICBoZWlnaHQ6IDMwJTtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAuY2Fyb3VzZWwge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDE3NXB4O1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgb3ZlcmZsb3cteTogc2Nyb2xsOyAvKiBoYXMgdG8gYmUgc2Nyb2xsLCBub3QgYXV0byAqL1xuICAgICAgICAgIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBvdmVyZmxvdy15OiBoaWRkZW47XG4gICAgICAgIH1cblxuICAgICAgICAuY2Fyb3VzZWwge1xuICAgICAgICAgIC1tcy1vdmVyZmxvdy1zdHlsZTogbm9uZTsgLy8gSUUgMTArXG4gICAgICAgICAgb3ZlcmZsb3c6IC1tb3otc2Nyb2xsYmFycy1ub25lOyAvLyBGaXJlZm94XG4gICAgICAgIH1cblxuICAgICAgICAuY2Fyb3VzZWw6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lOyAvLyBTYWZhcmkgYW5kIENocm9tZVxuICAgICAgICB9XG5cbiAgICAgICAgLmNhcm91c2VsIHAge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLnNjcm9sbEJhciB7XG4gICAgICAgICAgd2lkdGg6ICR7c2Nyb2xsUHJvZ3Jlc3MgKyAnJSd9O1xuICAgICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYig3MSwgNzEsIDUxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC53aXBlQ29udGVudCB7XG4gICAgICAgICAgYW5pbWF0aW9uOiB3aXBlQ29udGVudCAycztcbiAgICAgICAgfVxuXG4gICAgICAgIEBrZXlmcmFtZXMgd2lwZUNvbnRlbnQge1xuICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgIHdpZHRoOiAwJTtcbiAgICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgfVxuXG5cbiAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIEBtZWRpYSAke2RldmljZS5sYXB0b3B9IHtcbiAgICAgICAgICAgIC5jYXJvdXNlbFdyYXBwZXIge1xuICAgICAgICAgICAgICB3aWR0aDogODAuNSU7XG4gICAgICAgICAgICAgIG1hcmdpbjogMjBweCBhdXRvO1xuICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgIHJpZ2h0OiAxLjclO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuc2Nyb2xsQmFyIHtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDYXJvdXNlbDtcbiJdfQ== */\n/*@ sourceURL=/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js */`));\n};\n\nexport default Carousel;","map":{"version":3,"sources":["/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js"],"names":["React","useState","useContext","useEffect","useRef","FilterContext","SearchContext","AnimeContext","Anime","device","Loader","Carousel","topAnime","anime","setAnime","loading","setLoading","filter","search","selected","dispatch","carouselSelector","scrollProgress","setScrollProgress","getScrollPercent","current","scrollLeft","scrollWidth","offsetWidth","isDown","setIsDown","startX","setStartX","setScrollLeft","changeAnime","response","element","classList","remove","add","url","fetch","then","json","responseJson","top","catch","err","console","log","query","formatQueryParams","params","queryItems","map","key","encodeURIComponent","join","baseurl","q","page","type","limit","results","res","setTimeout","laptop","length","index"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef } from \"react\";\nimport { FilterContext } from \"../contexts/FilterContext\";\nimport { SearchContext } from \"../contexts/SearchContext\";\nimport { AnimeContext } from \"../contexts/AnimeContext\";\nimport Anime from \"./Anime\";\nimport {device} from \"../devices\"\nimport Loader from 'react-loader-spinner'\n\n\nconst Carousel = ({ topAnime }) => {\n  const [anime, setAnime] = useState(topAnime);\n  const [loading, setLoading] = useState(false)\n\n  const { filter } = useContext(FilterContext);\n  const { search } = useContext(SearchContext);\n  const { selected, dispatch } = useContext(AnimeContext);\n\n  const carouselSelector = useRef();\n  const [scrollProgress, setScrollProgress] = useState(\"0\");\n    let getScrollPercent = () => {\n       return  (carouselSelector.current.scrollLeft /\n            (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth)) * 100\n    }\n\n  const [isDown, setIsDown] = useState(false);\n  const [startX, setStartX] = useState();\n  const [scrollLeft, setScrollLeft] = useState();\n\n  let changeAnime = (response) => {\n\n    setAnime(response)\n    if( filter !== \"init\") {\n\n    let element = carouselSelector.current\n        element.classList.remove(\"wipeContent\")\n        void element.offsetWidth\n        element.classList.add(\"wipeContent\");\n\n    }\n  }\n\n\n//   let onMouseDown = e => {\n//     setIsDown(true);\n//     setStartX(e.pageX - carouselSelector.current.offsetLeft);\n//     setScrollLeft(carouselSelector.current.scrollLeft);\n//   };\n\n//   let onMouseLeave = e => {\n//     setIsDown(false);\n//   };\n\n//   let onMouseUp = e => {\n//     setIsDown(false);\n//   };\n\n//   let onMouseMove = e => {\n//     if (!isDown) return;\n//     e.preventDefault();\n//     const x = e.pageX;\n//     const distance = (x - startX) * 3;\n//     carouselSelector.current.scrollLeft = scrollLeft - distance;\n   \n//     let scrollPercent = getScrollPercent()\n//     setScrollProgress(scrollPercent);\n    \n//   };\n\n//   let onTouchMove = e => {\n//     let scrollPercent = getScrollPercent()\n//     setScrollProgress(scrollPercent);\n// }\n\n\n\n  useEffect(() => {\n    let url = \"\"\n\n    if(filter === \"top\" || filter === \"init\") {\n      url = \"https://api.jikan.moe/v3/top/anime/1/bypopularity\"\n    } else if(filter === \"upcoming\") {\n      url = \"https://api.jikan.moe/v3/top/anime/1/upcoming\"\n    } else(\n      url = \"https://api.jikan.moe/v3/top/anime/1/movie\"\n    )\n     \n    fetch(url)\n      .then(response => response.json())\n      .then(responseJson => changeAnime(responseJson.top))\n      .catch(err => console.log(err));\n\n  }, [filter]);\n\n  useEffect(() => {\n    if (search.query !== \"\") {\n      function formatQueryParams(params) {\n        const queryItems = Object.keys(params).map(\n          key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n        );\n        return queryItems.join(\"&\");\n      }\n\n      const baseurl = \"https://api.jikan.moe/v3/search/anime\";\n      let params = {\n        q: search.query,\n        page: 1,\n        type: \"tv\",\n        limit: 20\n      };\n\n      let url = baseurl + \"?\" + formatQueryParams(params);\n          carouselSelector.current.classList.add('wipeContent')\n      setLoading(true)\n      fetch(url)\n        .then(response => response.json())\n        .then(responseJson => setAnime(responseJson.results) )\n        .then(res => setTimeout(() => {\n          setLoading(false)\n          carouselSelector.current.classList.add('wipeContent')\n        },500))\n        .catch(err => console.log(err));\n    }\n  }, [search.query]);\n\n  useEffect(() => {\n    dispatch({ type: \"SELECT_ANIME\", selected: {} });\n  }, [anime]);\n\n  // useEffect(() => {\n  //   console.log(filter)\n  //   if(filter === \"init\") {\n\n  //   } else {\n  //     let element = carouselSelector.current\n  //     element.classList.remove(\"wipeContent\")\n  //     void element.offsetWidth\n  //     element.classList.add(\"wipeContent\");\n  //   }\n  // }, [filter])\n\n\n\n  return (\n    <div className=\"carouselWrapper\" \n    >\n      {loading === true ? \n      <Loader  type=\"Circles\" color=\"#ef5050\" height={45} width={45} />\n      :\n      <div\n        className={`carousel ${isDown === true ? \"isDown\" : \"\"} `}\n        ref={carouselSelector}\n        // onMouseDown={e => onMouseDown(e)}\n        // onMouseLeave={e => onMouseLeave(e)}\n        // onMouseUp={e => onMouseUp(e)}\n        // onMouseMove={e => onMouseMove(e)}\n        // onTouchMove={e => onTouchMove(e)}\n\n      >\n        \n        {\n          anime.length === 0 ? \n          <p>No Results</p>\n          :\n          anime.map((anime, index) => (\n            <Anime key={index} anime={anime} />\n          ))\n        }\n      </div>\n      }\n      <style jsx>{`\n        .carouselWrapper {\n            width: 90%;\n            clip-path: polygon(1% 0, 100% 0%, 98% 100%, 0% 100%);\n            margin: 10px auto;\n            height: 30%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .carousel {\n          width: 100%;\n          cursor: pointer;\n          display: flex;\n          min-height: 175px;\n          height: 100%;\n          max-width: 100%;\n          overflow-y: scroll; /* has to be scroll, not auto */\n          -webkit-overflow-scrolling: touch;\n          text-align: center;\n          align-items: center;\n          overflow-y: hidden;\n        }\n\n        .carousel {\n          -ms-overflow-style: none; // IE 10+\n          overflow: -moz-scrollbars-none; // Firefox\n        }\n\n        .carousel::-webkit-scrollbar {\n          display: none; // Safari and Chrome\n        }\n\n        .carousel p {\n          width: 100%;\n        }\n\n        .scrollBar {\n          width: ${scrollProgress + '%'};\n          height: 2px;\n          background-color: rgb(71, 71, 51);\n        }\n\n        .wipeContent {\n          animation: wipeContent 2s;\n        }\n\n        @keyframes wipeContent {\n          0% {\n            width: 0%;\n            opacity: 0;\n          }\n\n\n          100% {\n            width: 100%;\n          }\n        }\n\n        @media ${device.laptop} {\n            .carouselWrapper {\n              width: 80.5%;\n              margin: 20px auto;\n              position: relative;\n              right: 1.7%;\n            }\n\n            .scrollBar {\n\n            }\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default Carousel;\n"]},"metadata":{},"sourceType":"module"}