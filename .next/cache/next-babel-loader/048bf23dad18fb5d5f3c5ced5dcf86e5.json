{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar _jsxFileName = \"/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport { FilterContext } from '../contexts/FilterContext';\nimport { SearchContext } from '../contexts/SearchContext';\nimport { AnimeContext } from '../contexts/AnimeContext';\nimport Anime from './Anime';\n\nconst Carousel = ({\n  topAnime\n}) => {\n  const {\n    0: anime,\n    1: setAnime\n  } = useState(topAnime);\n  const {\n    filter\n  } = useContext(FilterContext);\n  const {\n    query\n  } = useContext(SearchContext);\n  const {\n    selected,\n    dispatch\n  } = useContext(AnimeContext);\n  const {\n    0: scrollPercent,\n    1: setScrollPercent\n  } = useState('0%');\n  const carouselSelector = useRef();\n  const {\n    0: isDown,\n    1: setIsDown\n  } = useState(false);\n  const {\n    0: startX,\n    1: setStartX\n  } = useState();\n  const {\n    0: scrollLeft,\n    1: setScrollLeft\n  } = useState();\n\n  let onMouseDown = e => {\n    setIsDown(true);\n    setStartX(e.pageX - carouselSelector.current.offsetLeft);\n    setScrollLeft(carouselSelector.current.scrollLeft);\n  };\n\n  let onMouseLeave = e => {\n    setIsDown(false);\n  };\n\n  let onMouseUp = e => {\n    setIsDown(false);\n  };\n\n  let onMouseMove = e => {\n    if (!isDown) return;\n    e.preventDefault();\n    const x = e.pageX;\n    const distance = (x - startX) * 2.5;\n    carouselSelector.current.scrollLeft = scrollLeft - distance;\n    setScrollPercent(carouselSelector.current.scrollLeft / (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth) * 100);\n  };\n\n  useEffect(() => {\n    const url = filter === 'top' ? 'https://api.jikan.moe/v3/top/anime/1/bypopularity' : 'https://api.jikan.moe/v3/top/anime/1/upcoming';\n    fetch(url).then(response => response.json()).then(responseJson => setAnime(responseJson.top)).catch(err => console.log(err));\n  }, [filter]);\n  useEffect(() => {\n    if (query !== '') {\n      function formatQueryParams(params) {\n        const queryItems = _Object$keys(params).map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`);\n\n        return queryItems.join('&');\n      }\n\n      const baseurl = 'https://api.jikan.moe/v3/search/anime';\n      let params = {\n        q: query,\n        page: 1,\n        type: 'tv',\n        limit: 10\n      };\n      let url = baseurl + '?' + formatQueryParams(params);\n      fetch(url).then(response => response.json()).then(responseJson => setAnime(responseJson.results)).catch(err => console.log(err));\n    }\n  }, [query]);\n  useEffect(() => {\n    dispatch({\n      type: 'SELECT_ANIME',\n      selected: {}\n    });\n  }, [anime]);\n  return __jsx(\"div\", {\n    className: \"carouselWrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    ref: carouselSelector,\n    onMouseDown: e => onMouseDown(e),\n    onMouseLeave: e => onMouseLeave(e),\n    onMouseUp: e => onMouseUp(e),\n    onMouseMove: e => onMouseMove(e),\n    className: \"jsx-1557344906\" + \" \" + `carousel ${isDown === true ? 'isDown' : \"\"}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, anime.map((anime, index) => __jsx(Anime, {\n    key: index,\n    anime: anime,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  })), __jsx(_JSXStyle, {\n    id: \"1557344906\",\n    __self: this\n  }, \".carouselWrapper.jsx-1557344906{width:100%;}.carousel.jsx-1557344906{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:175px;max-width:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch;padding-bottom:5px;}.carousel.jsx-1557344906{-ms-overflow-style:none;overflow:-moz-scrollbars-none;}.carousel.jsx-1557344906::-webkit-scrollbar{display:none;}.scrollBar.jsx-1557344906{width:200px;height:6px;background-color:rgb(51,51,51);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YWthaXRlY2gvVGFrYWktVGVjaC9hbmltZS10cmFpbGVycy1uZXh0L2NvbXBvbmVudHMvQ2Fyb3VzZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa0c0QixBQUlnQyxBQUlJLEFBV1MsQUFLWCxBQUlELFdBdkJoQixDQXdCZSxDQUpmLEVBaEJpQixRQXFCa0IsQ0FWRCw4QkFDbEMsQUFXQSxtQ0F0QnFCLGlCQUNGLGVBQ0csa0JBQ2UsaUNBQ2QsbUJBRXZCIiwiZmlsZSI6Ii9Vc2Vycy90YWthaXRlY2gvVGFrYWktVGVjaC9hbmltZS10cmFpbGVycy1uZXh0L2NvbXBvbmVudHMvQ2Fyb3VzZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlUmVmfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEZpbHRlckNvbnRleHQgfSBmcm9tICcuLi9jb250ZXh0cy9GaWx0ZXJDb250ZXh0J1xuaW1wb3J0IHsgU2VhcmNoQ29udGV4dCB9IGZyb20gJy4uL2NvbnRleHRzL1NlYXJjaENvbnRleHQnXG5pbXBvcnQgeyBBbmltZUNvbnRleHQgfSBmcm9tICcuLi9jb250ZXh0cy9BbmltZUNvbnRleHQnXG5pbXBvcnQgQW5pbWUgZnJvbSAnLi9BbmltZSdcblxuXG5cbmNvbnN0IENhcm91c2VsID0gKHt0b3BBbmltZX0pID0+IHtcblxuICAgIGNvbnN0IFthbmltZSwgc2V0QW5pbWVdID0gdXNlU3RhdGUodG9wQW5pbWUpXG4gICAgY29uc3Qge2ZpbHRlcn0gPSB1c2VDb250ZXh0KEZpbHRlckNvbnRleHQpXG4gICAgY29uc3Qge3F1ZXJ5fSA9IHVzZUNvbnRleHQoU2VhcmNoQ29udGV4dClcbiAgICBjb25zdCB7c2VsZWN0ZWQsIGRpc3BhdGNofSA9IHVzZUNvbnRleHQoQW5pbWVDb250ZXh0KVxuICAgIFxuICAgIGNvbnN0IFtzY3JvbGxQZXJjZW50LCBzZXRTY3JvbGxQZXJjZW50XSA9IHVzZVN0YXRlKCcwJScpXG4gICAgY29uc3QgY2Fyb3VzZWxTZWxlY3RvciA9IHVzZVJlZigpXG5cbiAgICBjb25zdCBbaXNEb3duLCBzZXRJc0Rvd25dID0gdXNlU3RhdGUoZmFsc2UpXG4gICAgY29uc3QgW3N0YXJ0WCwgc2V0U3RhcnRYXSA9IHVzZVN0YXRlKClcbiAgICBjb25zdCBbc2Nyb2xsTGVmdCwgc2V0U2Nyb2xsTGVmdF0gPSB1c2VTdGF0ZSgpXG5cbiAgICBsZXQgb25Nb3VzZURvd24gPSAoZSkgPT4ge1xuICAgICAgICBzZXRJc0Rvd24odHJ1ZSlcbiAgICAgICAgc2V0U3RhcnRYKGUucGFnZVggLSBjYXJvdXNlbFNlbGVjdG9yLmN1cnJlbnQub2Zmc2V0TGVmdCkgXG4gICAgICAgIHNldFNjcm9sbExlZnQoY2Fyb3VzZWxTZWxlY3Rvci5jdXJyZW50LnNjcm9sbExlZnQpXG4gICAgICAgIFxuICAgIH1cblxuICAgIGxldCBvbk1vdXNlTGVhdmUgPSAoZSkgPT4ge1xuICAgICAgICBzZXRJc0Rvd24oZmFsc2UpXG5cbiAgICB9XG5cbiAgICBsZXQgb25Nb3VzZVVwID0gKGUpID0+IHtcbiAgICAgICAgc2V0SXNEb3duKGZhbHNlKVxuXG4gICAgfVxuXG4gICAgbGV0IG9uTW91c2VNb3ZlID0gKGUpID0+IHtcbiAgICAgICAgaWYoIWlzRG93bikgcmV0dXJuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBjb25zdCB4ID0gZS5wYWdlWFxuICAgICAgICBjb25zdCBkaXN0YW5jZSA9ICh4IC0gc3RhcnRYKSAqIDIuNVxuICAgICAgICBjYXJvdXNlbFNlbGVjdG9yLmN1cnJlbnQuc2Nyb2xsTGVmdCA9ICAoc2Nyb2xsTGVmdCAtIGRpc3RhbmNlKSAgXG4gICAgICAgIHNldFNjcm9sbFBlcmNlbnQoKGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5zY3JvbGxMZWZ0IC8gKGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5zY3JvbGxXaWR0aCAtIGNhcm91c2VsU2VsZWN0b3IuY3VycmVudC5vZmZzZXRXaWR0aCkpICogMTAwIClcbiAgICB9XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBmaWx0ZXIgPT09ICd0b3AnID8gJ2h0dHBzOi8vYXBpLmppa2FuLm1vZS92My90b3AvYW5pbWUvMS9ieXBvcHVsYXJpdHknIDogJ2h0dHBzOi8vYXBpLmppa2FuLm1vZS92My90b3AvYW5pbWUvMS91cGNvbWluZydcbiAgICAgICAgZmV0Y2godXJsKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlSnNvbiA9PiBzZXRBbmltZShyZXNwb25zZUpzb24udG9wKSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpIClcbiAgICB9LFtmaWx0ZXJdKVxuICAgIFxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHsgXG4gICAgICAgIGlmKHF1ZXJ5ICE9PSAnJykge1xuICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0UXVlcnlQYXJhbXMocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVlcnlJdGVtcyA9IE9iamVjdC5rZXlzKHBhcmFtcylcbiAgICAgICAgICAgICAgICAubWFwKGtleSA9PiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pfWApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5SXRlbXMuam9pbignJicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBiYXNldXJsID0gJ2h0dHBzOi8vYXBpLmppa2FuLm1vZS92My9zZWFyY2gvYW5pbWUnO1xuICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBxOiBxdWVyeSxcbiAgICAgICAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgICAgICAgIHR5cGU6ICd0dicsXG4gICAgICAgICAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHVybCA9IGJhc2V1cmwgKyAnPycgKyBmb3JtYXRRdWVyeVBhcmFtcyhwYXJhbXMpO1xuICAgICAgICAgICAgZmV0Y2godXJsKVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2VKc29uID0+IHNldEFuaW1lKHJlc3BvbnNlSnNvbi5yZXN1bHRzKSlcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSApXG5cbiAgICAgICAgfVxuICAgIH0sW3F1ZXJ5XSlcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGRpc3BhdGNoKHt0eXBlOidTRUxFQ1RfQU5JTUUnLCBzZWxlY3RlZDoge319KVxuICAgIH0sW2FuaW1lXSlcblxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJvdXNlbFdyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgY2Fyb3VzZWwgJHtpc0Rvd24gPT09IHRydWUgPyAnaXNEb3duJyA6IFwiXCJ9YH1cbiAgICAgICAgICAgICAgICByZWY9e2Nhcm91c2VsU2VsZWN0b3J9XG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBvbk1vdXNlRG93bihlKX0gXG4gICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoZSkgPT4gb25Nb3VzZUxlYXZlKGUpfSBcbiAgICAgICAgICAgICAgICBvbk1vdXNlVXA9eyhlKSA9PiBvbk1vdXNlVXAoZSl9IFxuICAgICAgICAgICAgICAgIG9uTW91c2VNb3ZlPXsoZSkgPT4gb25Nb3VzZU1vdmUoZSl9PlxuICAgICAgICAgICAgICAgIHthbmltZS5tYXAoKGFuaW1lLGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxBbmltZSBrZXk9e2luZGV4fSBhbmltZT17YW5pbWV9IC8+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPHN0eWxlIGpzeD57YFxuXG4gICAgICAgICAgICAgICAgLmNhcm91c2VsV3JhcHBlciB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYXJvdXNlbCB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMTc1cHg7XG4gICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteTogc2Nyb2xsOyAvKiBoYXMgdG8gYmUgc2Nyb2xsLCBub3QgYXV0byAqL1xuICAgICAgICAgICAgICAgICAgICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuY2Fyb3VzZWwge1xuICAgICAgICAgICAgICAgICAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7ICAvLyBJRSAxMCtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IC1tb3otc2Nyb2xsYmFycy1ub25lOyAgLy8gRmlyZWZveFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAuY2Fyb3VzZWw6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTsgLy8gU2FmYXJpIGFuZCBDaHJvbWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuc2Nyb2xsQmFyIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDIwMHB4O1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDZweDtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDUxLDUxLDUxKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzY3JvbGxCYXJcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJvdXNlbFxuIl19 */\\n/*@ sourceURL=/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js */\")), __jsx(\"div\", {\n    className: \"scrollBar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }));\n};\n\nexport default Carousel;","map":{"version":3,"sources":["/Users/takaitech/Takai-Tech/anime-trailers-next/components/Carousel.js"],"names":["React","useState","useContext","useEffect","useRef","FilterContext","SearchContext","AnimeContext","Anime","Carousel","topAnime","anime","setAnime","filter","query","selected","dispatch","scrollPercent","setScrollPercent","carouselSelector","isDown","setIsDown","startX","setStartX","scrollLeft","setScrollLeft","onMouseDown","e","pageX","current","offsetLeft","onMouseLeave","onMouseUp","onMouseMove","preventDefault","x","distance","scrollWidth","offsetWidth","url","fetch","then","response","json","responseJson","top","catch","err","console","log","formatQueryParams","params","queryItems","map","key","encodeURIComponent","join","baseurl","q","page","type","limit","results","index"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef} from 'react'\nimport { FilterContext } from '../contexts/FilterContext'\nimport { SearchContext } from '../contexts/SearchContext'\nimport { AnimeContext } from '../contexts/AnimeContext'\nimport Anime from './Anime'\n\n\n\nconst Carousel = ({topAnime}) => {\n\n    const [anime, setAnime] = useState(topAnime)\n    const {filter} = useContext(FilterContext)\n    const {query} = useContext(SearchContext)\n    const {selected, dispatch} = useContext(AnimeContext)\n    \n    const [scrollPercent, setScrollPercent] = useState('0%')\n    const carouselSelector = useRef()\n\n    const [isDown, setIsDown] = useState(false)\n    const [startX, setStartX] = useState()\n    const [scrollLeft, setScrollLeft] = useState()\n\n    let onMouseDown = (e) => {\n        setIsDown(true)\n        setStartX(e.pageX - carouselSelector.current.offsetLeft) \n        setScrollLeft(carouselSelector.current.scrollLeft)\n        \n    }\n\n    let onMouseLeave = (e) => {\n        setIsDown(false)\n\n    }\n\n    let onMouseUp = (e) => {\n        setIsDown(false)\n\n    }\n\n    let onMouseMove = (e) => {\n        if(!isDown) return\n        e.preventDefault()\n        const x = e.pageX\n        const distance = (x - startX) * 2.5\n        carouselSelector.current.scrollLeft =  (scrollLeft - distance)  \n        setScrollPercent((carouselSelector.current.scrollLeft / (carouselSelector.current.scrollWidth - carouselSelector.current.offsetWidth)) * 100 )\n    }\n\n    useEffect(() => {\n        const url = filter === 'top' ? 'https://api.jikan.moe/v3/top/anime/1/bypopularity' : 'https://api.jikan.moe/v3/top/anime/1/upcoming'\n        fetch(url)\n        .then(response => response.json())\n        .then(responseJson => setAnime(responseJson.top))\n        .catch(err => console.log(err) )\n    },[filter])\n    \n\n    useEffect(() => { \n        if(query !== '') {\n            function formatQueryParams(params) {\n                const queryItems = Object.keys(params)\n                .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)\n                return queryItems.join('&');\n            }\n            \n            const baseurl = 'https://api.jikan.moe/v3/search/anime';\n            let params = {\n                q: query,\n                page: 1,\n                type: 'tv',\n                limit: 10,\n            };\n            \n            let url = baseurl + '?' + formatQueryParams(params);\n            fetch(url)\n            .then(response => response.json())\n            .then(responseJson => setAnime(responseJson.results))\n            .catch(err => console.log(err) )\n\n        }\n    },[query])\n\n    useEffect(() => {\n        dispatch({type:'SELECT_ANIME', selected: {}})\n    },[anime])\n\n\n    return (\n        <div className=\"carouselWrapper\">\n            <div className={`carousel ${isDown === true ? 'isDown' : \"\"}`}\n                ref={carouselSelector}\n                onMouseDown={(e) => onMouseDown(e)} \n                onMouseLeave={(e) => onMouseLeave(e)} \n                onMouseUp={(e) => onMouseUp(e)} \n                onMouseMove={(e) => onMouseMove(e)}>\n                {anime.map((anime,index) => (\n                    <Anime key={index} anime={anime} />\n                ))}\n                <style jsx>{`\n\n                .carouselWrapper {\n                    width: 100%;\n                }\n\n                .carousel {\n                    cursor: pointer;\n                    display: flex;\n                    min-height: 175px;\n                    max-width: 100%;\n                    overflow-y: scroll; /* has to be scroll, not auto */\n                    -webkit-overflow-scrolling: touch;\n                    padding-bottom: 5px;\n\n                }\n\n                .carousel {\n                    -ms-overflow-style: none;  // IE 10+\n                    overflow: -moz-scrollbars-none;  // Firefox\n                }\n                \n                .carousel::-webkit-scrollbar {\n                    display: none; // Safari and Chrome\n                }\n\n                .scrollBar {\n                    width: 200px;\n                    height: 6px;\n                    background-color: rgb(51,51,51);\n\n                }\n\n                `}</style>\n            </div>\n            <div className=\"scrollBar\"></div>\n        </div>\n    )\n}\n\nexport default Carousel\n"]},"metadata":{},"sourceType":"module"}